{{ $ui_mechanics := .Site.Data.products.kubedb.ui_mechanics }}

{{ with $ui_mechanics }}

<section class="section-padding dark-bg mechanics-area" id="mechanics">
  <div class="container">

    <!-- section title -->
    <div class="columns is-centered">
      <div class="column is-10-tablet is-8-desktop is-8-widescreen">
        <div class="section-title has-text-centered-tablet">
          <h2>{{ .section.title }}</h2>
          <p>{{ .section.description }}</p>
        </div>
      </div>
    </div>

    <div class="columns is-vcentered" style="padding-bottom: 60px;">

      <!-- feature items -->
      <div class="column is-4">
        <div class="is-flex is-flex-direction-column is-flex-wrap-wrap"
          style="gap: 8px;">

          {{ range $i, $f := .features }}
          <div
            class="single-feature mechanism {{ if eq $i 0 }}is-active{{ end }}">
            <div class="icon">
              <img src="{{ $f.icon }}" alt="{{ $f.title }}" loading="lazy">
            </div>
            <div class="content">
              <strong class="{{ $f.id }}">{{ $f.title }}</strong>
              <p class="is-ellipsis-2">{{ $f.description }}</p>
            </div>
          </div>
          {{ end }}

        </div>
      </div>

      <!-- UI visual area -->
      <div class="column is-8">
        <div class="ui-mechanism">

          {{ range $i, $f := .features }}
          <div id="{{ $f.id }}"
            class="single-ui-ss {{ $f.id }} {{ if ne $i 0 }}is-hidden{{ end }}">
            <img src="{{ $f.image }}" alt="{{ $f.title }}">
          </div>
          {{ end }}

        </div>
      </div>

    </div>
  </div>
</section>
<script>
  const singleFeatures = document.querySelectorAll('.single-feature.mechanism');

  singleFeatures.forEach(function(feature) {

      // FIXED event name
      feature.addEventListener('mouseover', function() {

          // FIXED selector
          const title = feature.querySelector('.content strong');

          const className = title.className;

          showOnlySelectedDiv(className);

          // Update active class
          singleFeatures.forEach(function(f) {
              f.classList.remove('is-active');
          });

          feature.classList.add('is-active');
      });
  });


  function showOnlySelectedDiv(selectedId) {
      const divs = document.querySelectorAll('.ui-mechanism > div');

      divs.forEach(function(div) {
          if (div.id === selectedId) {
              div.classList.remove('is-hidden');
          } else {
              div.classList.add('is-hidden');
          }
      });
  }
</script>

{{ end }}
