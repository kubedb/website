<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta name="theme-color" content="#2D9AED" />
    <title>KubeDB Home</title>
    
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    
    <link rel="stylesheet" href="/assets/css/font-awesome.min.css" />
    
    <link rel="stylesheet" href="/assets/css/bulma-carousel.min.css" />
    
    <link rel="stylesheet" href="/assets/css/bulma.min.css" />
    
    <link rel="stylesheet" href="/assets/css/style.css" />
    
    <link rel="stylesheet" href="/assets/css/responsive.css" />
  </head>

  <body>
    

    
    





<header>
  
  <div class="header-bottom-area header-area documentation-page" id="header">
    <div class="container section">
      <nav class="navbar">
        <div class="navbar-brand">
          <a class="navbar-item" href="./../index.html">
            <img src="/assets/images/logo-color-kube.png" alt="" />
          </a>

          <a
            role="button"
            class="navbar-burger burger"
            aria-label="menu"
            aria-expanded="false"
            data-target="acNav"
          >
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
          </a>
        </div>

        <div id="acNav" class="navbar-menu main-menu">
          <div class="navbar-end">
            
            <div class="navbar-start">
              <a href="./../pricing/index.html" class="navbar-item">
                Commercial Support
              </a>

              <div class="navbar-item has-dropdown is-hoverable">
                <a class="navbar-link">
                  Database
                </a>

                <div class="navbar-dropdown">
                  <a class="navbar-item">
                    Item-1
                  </a>
                  <a class="navbar-item">
                    Item-2
                  </a>
                  <a class="navbar-item">
                    Item-3
                  </a>
                  <hr class="navbar-divider" />
                  <a class="navbar-item">
                    Item-4
                  </a>
                </div>
              </div>

              <a href="../documentations/welcome.html" class="navbar-item">
                Documentation
              </a>
              <a class="navbar-item">
                v 0.110
              </a>
              <a class="navbar-item">
                Community
              </a>
            </div>
            
            <div class="navbar-item">
              <div class="buttons main-menu-button">
                <a class="button is-small">
                  <span><i class="fa fa-github" aria-hidden="true"></i></span
                  >Star
                </a>
                <div class="star-count">
                  565
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
    </div>
    
    <div class="documentation-menu">
      <div class="container section">
        <div class="columns is-centered">
          <div class="column is-half has-text-centered">
            
            <div class="responsive-menu">
              <a
                role="button"
                class="navbar-burger burger"
                aria-label="menu"
                aria-expanded="false"
                data-target="acNav3"
              >
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
              </a>
            </div>
            
            
            <nav class="documentation-navbar">
              <div id="acNav3" class="navbar-menu nav-menu main-menu">
                <div class="navbar-centered">
                  
                  <div class="navbar-start">
                    
                    
                      
                        
                          <a href="/docs/0.9.0/" class=" navbar-item">Welcome</a>
                        
                      
                        
                          <a href="/docs/0.9.0/concepts/" class=" navbar-item">Concepts</a>
                        
                      
                        
                          <a href="/docs/0.9.0/setup/" class=" navbar-item">Setup</a>
                        
                      
                        
                          <div class="navbar-item has-dropdown is-hoverable">
                            <a class="navbar-link">
                              Guides
                            </a>
                            <div class="navbar-dropdown">
                              
                                
                              
                                
                                  <a href="/docs/0.9.0/guides/elasticsearch/" class="navbar-item">Elasticsearch</a>
                                
                              
                                
                                  <a href="/docs/0.9.0/guides/memcached/" class="navbar-item">Memcached</a>
                                
                              
                                
                                  <a href="/docs/0.9.0/guides/mongodb/" class="navbar-item">MongoDB</a>
                                
                              
                                
                                  <a href="/docs/0.9.0/guides/mysql/" class="navbar-item">MySQL</a>
                                
                              
                                
                                  <a href="/docs/0.9.0/guides/postgres/" class="navbar-item">PostgreSQL</a>
                                
                              
                                
                                  <a href="/docs/0.9.0/guides/redis/" class="navbar-item">Redis</a>
                                
                              
                            </div>
                          </div>
                        
                      
                        
                          <a href="/docs/0.9.0/reference/" class=" navbar-item">Reference</a>
                        
                      
                    
                  </div>
                  
                </div>
              </div>
            </nav>
            
          </div>
        </div>
      </div>
    </div>
    
  </div>
  
</header>


    

    
    









<div class="documentation-area">
  <div class="container section">
    <div class="columns">
      <div class="column is-3">
        
        <div class="kd-left-sidebar">
          <div class="kd-version">
            
            <div class="control has-icons-left">
              <div class="select">
                
                
                <select>
                  
                    
                    
                      
                        <option>master</option>
                      
                    
                  
                    
                    
                      
                        <option >0.11.0</option>
                      
                    
                  
                    
                    
                      
                        <option >0.10.0</option>
                      
                    
                  
                    
                    
                      
                        <option  selected >0.9.0</option>
                      
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                      
                        <option >0.8.0</option>
                      
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                      
                        <option>0.6.0</option>
                      
                    
                  
                </select>
              </div>
              <span class="icon is-left">
                <i class="fa fa-globe"></i>
              </span>
            </div>
          </div>

          
            
            
              
            
              
            
              
            
              
                
                  

                  
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    

                      

                    
                  
                    
                  
                
              
            
              
            
          

          
          <div class="kd-sidebar-menu">
            
              

              
              

                
              

                
              

                
              

                
                  

                  
                  

                    
                      




  



<div class="item">
  <input type="checkbox" id="1fc73f4b83b6c7fc374070a8b0558579-1" >
  <label for="1fc73f4b83b6c7fc374070a8b0558579-1"><a href="/docs/0.9.0/guides/">PostgreSQL</a></label>
</div>


                    
                    
                  

                    
                      
                        
                      

                    
                    
                  

                    
                      
                        
                      

                    
                    
                  

                    
                      
                        
                      

                    
                    
                  

                    
                      
                        
                      

                    
                    
                  

                    
                      
                        

                            
                              
                                






<div class="item">
  <input type="checkbox" id="1fc73f4b83b6c7fc374070a8b0558579-2" >
  <label for="1fc73f4b83b6c7fc374070a8b0558579-2"><a href="/docs/0.9.0/guides/postgres/">Postgres</a></label>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="1fc73f4b83b6c7fc374070a8b0558579-3" >
  <label for="1fc73f4b83b6c7fc374070a8b0558579-3"><a>Quickstart</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li ><a href="/docs/0.9.0/guides/postgres/quickstart/quickstart/">Overview</a></li>
        
      
        
          <li ><a href="/docs/0.9.0/guides/postgres/quickstart/rbac/">RBAC</a></li>
        
      
    </ul>
  </div>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="1fc73f4b83b6c7fc374070a8b0558579-4" >
  <label for="1fc73f4b83b6c7fc374070a8b0558579-4"><a>Clustering</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li ><a href="/docs/0.9.0/guides/postgres/clustering/ha_cluster/">HA Setup</a></li>
        
      
        
          <li ><a href="/docs/0.9.0/guides/postgres/clustering/streaming_replication/">Streaming Replication</a></li>
        
      
    </ul>
  </div>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="1fc73f4b83b6c7fc374070a8b0558579-5" checked>
  <label for="1fc73f4b83b6c7fc374070a8b0558579-5"><a>Snapshotting</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li class="is-active"><a href="/docs/0.9.0/guides/postgres/snapshot/instant_backup/">Instant Backup</a></li>
        
      
        
          <li ><a href="/docs/0.9.0/guides/postgres/snapshot/scheduled_backup/">Scheduled Backup</a></li>
        
      
        
          <li ><a href="/docs/0.9.0/guides/postgres/snapshot/continuous_archiving/">WAL Archiving</a></li>
        
      
    </ul>
  </div>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="1fc73f4b83b6c7fc374070a8b0558579-6" >
  <label for="1fc73f4b83b6c7fc374070a8b0558579-6"><a>Initialization</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li ><a href="/docs/0.9.0/guides/postgres/initialization/script_source/">Using Script</a></li>
        
      
        
          <li ><a href="/docs/0.9.0/guides/postgres/initialization/snapshot_source/">From Snapshot</a></li>
        
      
        
          <li ><a href="/docs/0.9.0/guides/postgres/initialization/wal_source/">From WAL</a></li>
        
      
    </ul>
  </div>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="1fc73f4b83b6c7fc374070a8b0558579-7" >
  <label for="1fc73f4b83b6c7fc374070a8b0558579-7"><a>Private Registry</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li ><a href="/docs/0.9.0/guides/postgres/private-registry/using-private-registry/">Quickstart</a></li>
        
      
    </ul>
  </div>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="1fc73f4b83b6c7fc374070a8b0558579-8" >
  <label for="1fc73f4b83b6c7fc374070a8b0558579-8"><a>Custom Configuration</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li ><a href="/docs/0.9.0/guides/postgres/custom-config/using-custom-config/">Quickstart</a></li>
        
      
    </ul>
  </div>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="1fc73f4b83b6c7fc374070a8b0558579-9" >
  <label for="1fc73f4b83b6c7fc374070a8b0558579-9"><a>Custom Versions</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li ><a href="/docs/0.9.0/guides/postgres/custom-versions/setup/">Overview</a></li>
        
      
    </ul>
  </div>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="1fc73f4b83b6c7fc374070a8b0558579-10" >
  <label for="1fc73f4b83b6c7fc374070a8b0558579-10"><a>Monitoring</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li ><a href="/docs/0.9.0/guides/postgres/monitoring/using-builtin-prometheus/">Builtin Prometheus Discovery</a></li>
        
      
        
          <li ><a href="/docs/0.9.0/guides/postgres/monitoring/using-coreos-prometheus-operator/">Coreos Prometheus Operator</a></li>
        
      
    </ul>
  </div>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="1fc73f4b83b6c7fc374070a8b0558579-11" >
  <label for="1fc73f4b83b6c7fc374070a8b0558579-11"><a>CLI</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li ><a href="/docs/0.9.0/guides/postgres/cli/cli/">Quickstart</a></li>
        
      
    </ul>
  </div>
</div>


                              
                            

                        
                      

                    
                    
                  

                    
                      
                        
                      

                    
                    
                  
                  

                
              

                
              
              
            
          </div>



































          
        </div>
        
      </div>
      <div class="column is-7">
        <div class="full-info">
          

<blockquote>
<p>New to KubeDB? Please start <a href="/docs/0.9.0/concepts/README">here</a>.</p>
</blockquote>

<h1 id="database-snapshot">Database Snapshot</h1>

<p>KubeDB operator maintains another Custom Resource Definition (CRD) for database backups called Snapshot. Snapshot object is used to take backup or restore from a backup. For more details about Snapshot please visit <a href="/docs/0.9.0/concepts/snapshot">here</a>.</p>

<p>This tutorial will show how to take instant backup of PostgreSQL database deployed with KubeDB.</p>

<h2 id="before-you-begin">Before You Begin</h2>

<p>At first, you need to have a Kubernetes cluster, and the kubectl command-line tool must be configured to communicate with your cluster. If you do not already have a cluster, you can create one by using <a href="https://github.com/kubernetes/minikube">minikube</a>.</p>

<p>Now, install KubeDB cli on your workstation and KubeDB operator in your cluster following the steps <a href="/docs/0.9.0/setup/install">here</a>.</p>

<p>To keep things isolated, this tutorial uses a separate namespace called <code>demo</code> throughout this tutorial.</p>

<pre><code class="language-console">$ kubectl create ns demo
namespace &quot;demo&quot; created

$ kubectl get ns demo
NAME    STATUS  AGE
demo    Active  5s
</code></pre>

<blockquote>
<p>Note: Yaml files used in this tutorial are stored in <a href="https://github.com/kubedb/cli/tree/master/docs/examples/postgres">docs/examples/postgres</a> folder in GitHub repository <a href="https://github.com/kubedb/cli">kubedb/cli</a>.</p>
</blockquote>

<h2 id="prepare-database">Prepare Database</h2>

<p>We need an Postgres database running to perform backup operation. If you don&rsquo;t have a Postgres instance running, create one and initialize it by following the tutorial <a href="/docs/0.9.0/guides/postgres/initialization/script_source">here</a>.</p>

<h2 id="instant-backup">Instant Backup</h2>

<p>KubeDB operator watches for Snapshot objects using Kubernetes API. When a Snapshot object is created, it will launch a Job that runs the <code>pg_dumpall</code> command and uploads the output <strong>sql</strong> file to cloud storage using <a href="https://github.com/appscode/osm">osm</a>.</p>

<p>Below the Snapshot object that will be created in this tutorial,</p>

<pre><code class="language-yaml">apiVersion: kubedb.com/v1alpha1
kind: Snapshot
metadata:
  name: instant-snapshot
  namespace: demo
  labels:
    kubedb.com/kind: Postgres
spec:
  databaseName: script-postgres
  storageSecretName: gcs-secret
  gcs:
    bucket: kubedb
</code></pre>

<p>Here,</p>

<ul>
<li><code>metadata.labels</code> should include the type of database.</li>
<li><code>spec.databaseName</code> indicates the Postgres object name, <code>script-postgres</code>, whose snapshot is taken.</li>
<li><code>spec.storageSecretName</code> points to the Secret containing the credentials for snapshot storage destination.</li>
<li><code>spec.gcs.bucket</code> points to the bucket name used to store the snapshot data.</li>
</ul>

<p>In this case, <code>kubedb.com/kind: Postgres</code> tells KubeDB operator that this Snapshot belongs to a Postgres object. Only PostgreSQL controller will handle this Snapshot object.</p>

<blockquote>
<p>Note: Snapshot and Secret objects must be in the same namespace as Postgres, <code>script-postgres</code>, in our case.</p>
</blockquote>

<h3 id="snapshot-storage-secret">Snapshot Storage Secret</h3>

<p>Storage Secret should contain credentials that will be used to access storage destination. In this tutorial, snapshot data will be stored in a Google Cloud Storage (GCS) bucket.</p>

<p>For GCS bucket, a storage Secret require to have following 2 keys:</p>

<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>GOOGLE_PROJECT_ID</code></td>
<td><code>Required</code>. Google Cloud project ID</td>
</tr>

<tr>
<td><code>GOOGLE_SERVICE_ACCOUNT_JSON_KEY</code></td>
<td><code>Required</code>. Google Cloud service account json key</td>
</tr>
</tbody>
</table>

<pre><code class="language-console">$ echo -n '&lt;your-project-id&gt;' &gt; GOOGLE_PROJECT_ID
$ mv downloaded-sa-json.key &gt; GOOGLE_SERVICE_ACCOUNT_JSON_KEY
$ kubectl create secret -n demo generic gcs-secret \
    --from-file=./GOOGLE_PROJECT_ID \
    --from-file=./GOOGLE_SERVICE_ACCOUNT_JSON_KEY
secret &quot;gcs-secret&quot; created
</code></pre>

<pre><code class="language-yaml">$  kubectl get secret -n demo gcs-secret -o yaml
apiVersion: v1
data:
  GOOGLE_PROJECT_ID: &lt;base64 encoded project id&gt;
  GOOGLE_SERVICE_ACCOUNT_JSON_KEY: &lt;base64 encoded service-account-json-key&gt;
kind: Secret
metadata:
  creationTimestamp: 2018-09-04T06:08:01Z
  name: gcs-secret
  namespace: demo
  resourceVersion: &quot;11716&quot;
  selfLink: /api/v1/namespaces/demo/secrets/gcs-secret
  uid: e0aef5a7-b008-11e8-9990-0800279292a5
type: Opaque

</code></pre>

<h3 id="snapshot-storage-backend">Snapshot Storage Backend</h3>

<p>KubeDB supports various cloud providers (<em>S3</em>, <em>GCS</em>, <em>Azure</em>, <em>OpenStack</em> <em>Swift</em> and/or locally mounted volumes) as snapshot storage backend. In this tutorial, <em>GCS</em> backend is used.</p>

<p>To configure this backend, following parameters are available:</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>spec.gcs.bucket</code></td>
<td><code>Required</code>. Name of bucket</td>
</tr>

<tr>
<td><code>spec.gcs.prefix</code></td>
<td><code>Optional</code>. Path prefix into bucket where snapshot data will be stored</td>
</tr>
</tbody>
</table>

<p>To learn how to configure other storage destinations for snapshot data, please visit <a href="/docs/0.9.0/concepts/snapshot">here</a>.</p>

<p>Now, let&rsquo;s create a Snapshot object.</p>

<pre><code class="language-console">$ kubectl create -f https://raw.githubusercontent.com/kubedb/cli/0.9.0/docs/examples/postgres/snapshot/instant-snapshot.yaml
snapshot.kubedb.com/instant-snapshot created
</code></pre>

<p>Verify that the Snapshot has been successfully created,</p>

<pre><code class="language-console">$ kubectl get snap -n demo --selector=&quot;kubedb.com/kind=Postgres,kubedb.com/name=script-postgres&quot;
NAME               DATABASENAME      STATUS    AGE
instant-snapshot   script-postgres   Running   58s
</code></pre>

<p>Notice that the <code>STATUS</code> field is showing <code>Running</code>. It means the backup is running.</p>

<p>Snapshot data is stored in the backend in following directory <code>{bucket}/{prefix}/kubedb/{namespace}/{PostgreSQL name}/{Snapshot name}/</code>.</p>

<p>Once the snapshot Job is completed, you can see the output of the <code>pg_dumpall</code> command stored in the GCS bucket.</p>

<p>Verify that the backup has been completed successfully using following command,</p>

<pre><code class="language-console">$ kubectl get snap -n demo --selector=&quot;kubedb.com/kind=Postgres,kubedb.com/name=script-postgres&quot;
NAME               DATABASENAME      STATUS      AGE
instant-snapshot   script-postgres   Succeeded   36s
</code></pre>

<p>Here, <code>STATUS</code> <code>Succeeded</code> means the backup has been completed successfully. Now, navigate to the bucket to see the backed up file.</p>

<p align="center">
  <kbd>
    <img alt="snapshot-console"  src="/docs/0.9.0/images/postgres/instant-snapshot.png">
  </kbd>
</p>

<p>From the above image, you can see that the snapshot data file <code>dumpfile.sql</code> is stored in your bucket.</p>

<p>If you open this <code>dumpfile.sql</code> file, you will see the query to create <code>dashboard</code> TABLE.</p>

<pre><code class="language-console">
--
-- Name: dashboard; Type: TABLE; Schema: data; Owner: postgres
--

CREATE TABLE dashboard (
    id bigint NOT NULL,
    version integer NOT NULL,
    slug character varying(255) NOT NULL,
    title character varying(255) NOT NULL,
    data text NOT NULL,
    org_id bigint NOT NULL,
    created timestamp without time zone NOT NULL,
    updated timestamp without time zone NOT NULL,
    updated_by integer,
    created_by integer
);


ALTER TABLE dashboard OWNER TO postgres;
</code></pre>

<p>You can see the Snapshot list for Postgres <code>script-postgres</code> by running <code>kubedb describe</code> command.</p>

<pre><code class="language-console">$ kubedb describe pg -n demo script-postgres
Name:               script-postgres
Namespace:          demo
CreationTimestamp:  Tue, 04 Sep 2018 11:55:22 +0600
Labels:             &lt;none&gt;
Annotations:        kubectl.kubernetes.io/last-applied-configuration={&quot;apiVersion&quot;:&quot;kubedb.com/v1alpha1&quot;,&quot;kind&quot;:&quot;Postgres&quot;,&quot;metadata&quot;:{&quot;annotations&quot;:{},&quot;name&quot;:&quot;script-postgres&quot;,&quot;namespace&quot;:&quot;demo&quot;},&quot;spec&quot;:{&quot;init&quot;:{&quot;script...
Replicas:           1  total
Status:             Running
Init:
  scriptSource:
Volume:
    Type:       ConfigMap (a volume populated by a ConfigMap)
    Name:       pg-init-script
    Optional:   false
  StorageType:  Durable
Volume:
  StorageClass:  standard
  Capacity:      50Mi
  Access Modes:  RWO

StatefulSet:          
  Name:               script-postgres
  CreationTimestamp:  Tue, 04 Sep 2018 11:55:25 +0600
  Labels:               kubedb.com/kind=Postgres
                        kubedb.com/name=script-postgres
  Annotations:        &lt;none&gt;
  Replicas:           824640513680 desired | 1 total
  Pods Status:        1 Running / 0 Waiting / 0 Succeeded / 0 Failed

Service:        
  Name:         script-postgres
  Labels:         kubedb.com/kind=Postgres
                  kubedb.com/name=script-postgres
  Annotations:  &lt;none&gt;
  Type:         ClusterIP
  IP:           10.99.38.101
  Port:         api  5432/TCP
  TargetPort:   api/TCP
  Endpoints:    172.17.0.6:5432

Service:        
  Name:         script-postgres-replicas
  Labels:         kubedb.com/kind=Postgres
                  kubedb.com/name=script-postgres
  Annotations:  &lt;none&gt;
  Type:         ClusterIP
  IP:           10.106.251.230
  Port:         api  5432/TCP
  TargetPort:   api/TCP
  Endpoints:    172.17.0.6:5432

Database Secret:
  Name:         script-postgres-auth
  Labels:         kubedb.com/kind=Postgres
                  kubedb.com/name=script-postgres
  Annotations:  &lt;none&gt;
  
Type:  Opaque
  
Data
====
  POSTGRES_PASSWORD:  16 bytes
  POSTGRES_USER:      8 bytes

Topology:
  Type     Pod                StartTime                      Phase
  ----     ---                ---------                      -----
  primary  script-postgres-0  2018-09-04 11:55:32 +0600 +06  Running

Snapshots:
  Name              Bucket     StartTime                        CompletionTime                   Phase
  ----              ------     ---------                        --------------                   -----
  instant-snapshot  gs:kubedb  Tue, 04 Sep 2018 12:10:54 +0600  Tue, 04 Sep 2018 12:11:45 +0600  Succeeded

Events:
  Type    Reason              Age   From               Message
  ----    ------              ----  ----               -------
  Normal  Successful          33m   Postgres operator  Successfully created Service
  Normal  Successful          33m   Postgres operator  Successfully created Service
  Normal  Successful          31m   Postgres operator  Successfully created StatefulSet
  Normal  Successful          31m   Postgres operator  Successfully created Postgres
  Normal  Successful          31m   Postgres operator  Successfully patched StatefulSet
  Normal  Successful          31m   Postgres operator  Successfully patched Postgres
  Normal  Starting            17m   Job Controller     Backup running
  Normal  SuccessfulSnapshot  16m   Job Controller     Successfully completed snapshot
</code></pre>

<h2 id="cleanup-snapshot">Cleanup Snapshot</h2>

<p>If you want to delete snapshot data from storage, you can delete Snapshot object.</p>

<pre><code class="language-console">$ kubectl delete snap -n demo instant-snapshot
snapshot &quot;instant-snapshot&quot; deleted
</code></pre>

<h2 id="cleaning-up">Cleaning up</h2>

<p>To cleanup the Kubernetes resources created by this tutorial, run:</p>

<pre><code class="language-console">$ kubectl patch -n demo pg/script-postgres -p '{&quot;spec&quot;:{&quot;terminationPolicy&quot;:&quot;WipeOut&quot;}}' --type=&quot;merge&quot;
$ kubectl delete -n demo pg/script-postgres

$ kubectl delete -n demo configmap/pg-init-script
$ kubectl delete -n demo secret/gcs-secret

$ kubectl delete ns demo
</code></pre>

<h2 id="next-steps">Next Steps</h2>

<ul>
<li>Setup <a href="/docs/0.9.0/guides/postgres/snapshot/continuous_archiving">Continuous Archiving</a> in PostgreSQL using <code>wal-g</code></li>
<li>Learn how to <a href="/docs/0.9.0/guides/postgres/snapshot/scheduled_backup">schedule backup</a>  of PostgreSQL database.</li>
<li>Learn about initializing <a href="/docs/0.9.0/guides/postgres/initialization/snapshot_source">PostgreSQL from KubeDB Snapshot</a>.</li>
<li>Want to setup PostgreSQL cluster? Check how to <a href="/docs/0.9.0/guides/postgres/clustering/ha_cluster">configure Highly Available PostgreSQL Cluster</a></li>
<li>Want to hack on KubeDB? Check our <a href="/docs/0.9.0/CONTRIBUTING">contribution guidelines</a>.</li>
</ul>

        </div>
      </div>
      <div class="column is-2">
        <div class="right-sidebar-area">
          
          <div class="search-area">
            <form action="#">
              <input type="text" placeholder="Search..." />
              <button class="search-button">
                <i class="fa fa-search" aria-hidden="true"></i>
              </button>
            </form>
          </div>
          

          
          <div class="tbl-of-contents">
            <h4>What's on this Page</h4>
            <nav id="TableOfContents">
<ul>
<li><a href="#database-snapshot">Database Snapshot</a>
<ul>
<li><a href="#before-you-begin">Before You Begin</a></li>
<li><a href="#prepare-database">Prepare Database</a></li>
<li><a href="#instant-backup">Instant Backup</a>
<ul>
<li><a href="#snapshot-storage-secret">Snapshot Storage Secret</a></li>
<li><a href="#snapshot-storage-backend">Snapshot Storage Backend</a></li>
</ul></li>
<li><a href="#cleanup-snapshot">Cleanup Snapshot</a></li>
<li><a href="#cleaning-up">Cleaning up</a></li>
<li><a href="#next-steps">Next Steps</a></li>
</ul></li>
</ul>
</nav>
          </div>
          
        </div>
      </div>
    </div>
  </div>
</div>



    
    
<section></section>

    

    
    
<section></section>

    

    
    
    <section class="cta-area section-padding pt-0">
      <div class="container section">
        <div class="cta-padding">
          <div class="columns">
            <div class="column is-6">
              
              <div class="cta-text">
                <h2>Ready to get Start?</h2>
                <p>Create a Free Account and refer your friend</p>
              </div>
              
            </div>
            <div class="column is-6 has-text-right is-mobile">
              <div class="cta-button d-table">
                
                <div class="cta-button-inner d-table-cell">
                  <a href="#" class="button kd-button kd-primary"
                    >Try Now for FREE</a
                  >
                </div>
                
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    

    
    
    <footer class="footer-area">
      <div class="footer-top">
        <div class="container section">
          <div class="columns">
            <div class="column is-4">
              <div class="single-footer-widget">
                
                <div class="footer-logo">
                  <a href="#"
                    ><img
                      src="/assets/images/logo-color-appscode.png"
                      alt=""
                      class="img"
                  /></a>
                </div>
                

                
                <div class="subscription-form">
                  <form action="#">
                    <label for="email">Subscribe Our Newsletter</label>
                    <div class="field has-addons">
                      <div class="control">
                        <input
                          class="input"
                          name="email"
                          id="email"
                          type="email"
                          placeholder="info@gmail.com"
                        />
                      </div>
                      <div class="control">
                        <a class="button kd-primary">
                          <i class="fa fa-paper-plane-o" aria-hidden="true"></i>
                        </a>
                      </div>
                    </div>
                  </form>
                </div>
                

                
                <div class="contact-information">
                  <h4>Have any Inquiry?</h4>
                  <ul class="all-contact-info">
                    <li>
                      <a href="callto:+123456789"
                        ><span
                          ><i class="fa fa-phone" aria-hidden="true"></i></span
                        >+123 456 789</a
                      >
                    </li>

                    <li>
                      <a href="mailto:appscode@gmail.com"
                        ><span
                          ><i
                            class="fa fa-envelope-o"
                            aria-hidden="true"
                          ></i></span
                        >appscode@gmail.com</a
                      >
                    </li>
                  </ul>
                </div>
                
              </div>
            </div>

            <div class="column is-2">
              <div class="single-footer-widget">
                
                <div class="footer-menu">
                  <h4>Products</h4>
                  <ul class="footer-link">
                    <li><a href="#">Voyager</a></li>
                    <li><a href="#">KubeDB</a></li>
                    <li><a href="#">Pharmer Stash </a></li>
                    <li><a href="#">Service Broker</a></li>
                    <li><a href="#">Kubed</a></li>
                    <li><a href="#">Guard</a></li>
                    <li><a href="#">Swift</a></li>
                    <li><a href="#">Searchlight</a></li>
                  </ul>
                </div>
                
              </div>
            </div>

            <div class="column is-2">
              <div class="single-footer-widget">
                
                <div class="footer-menu">
                  <h4>Offerings</h4>
                  <ul class="footer-link">
                    <li><a href="#">Products</a></li>
                    <li><a href="#">Services</a></li>
                    <li><a href="#">Open source </a></li>
                  </ul>
                </div>
                
              </div>
            </div>

            <div class="column is-2">
              <div class="single-footer-widget">
                
                <div class="footer-menu">
                  <h4>Company</h4>
                  <ul class="footer-link">
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">blog</a></li>
                    <li><a href="#">Seles Inquiry</a></li>
                    <li><a href="#">Contact Us</a></li>
                  </ul>
                </div>
                
              </div>
            </div>

            <div class="column is-2">
              <div class="single-footer-widget">
                
                <div class="footer-menu">
                  <h4>Legal</h4>
                  <ul class="footer-link">
                    <li><a href="#">Service Level Agreement</a></li>
                    <li><a href="#">Security</a></li>
                    <li><a href="#">Learn More</a></li>
                    <li><a href="#">Contact Us</a></li>
                  </ul>
                </div>
                
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <div class="container section">
          <div class="columns">
            <div class="column is-4">
              <p>All rights reserved © 2018. Appscode, Inc..</p>
            </div>
            <div class="column is-4 is-mobile has-text-centered">
              <div class="footer-inline-link">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
              </div>
            </div>
            <div class="column is-4 is-mobile has-text-right">
              <div class="socail-link-inline">
                <ul>
                  <li>
                    <a href="#"
                      ><i class="fa fa-twitter" aria-hidden="true"></i
                    ></a>
                  </li>
                  <li>
                    <a href="#"
                      ><i class="fa fa-facebook" aria-hidden="true"></i
                    ></a>
                  </li>
                  <li>
                    <a href="#"
                      ><i class="fa fa-github" aria-hidden="true"></i
                    ></a>
                  </li>
                  <li>
                    <a href="#"
                      ><i class="fa fa-youtube" aria-hidden="true"></i
                    ></a>
                  </li>
                  <li>
                    <a href="#"
                      ><i class="fa fa-twitter" aria-hidden="true"></i
                    ></a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>
    
    

    
    <script src="/assets/js/bulma-carousel.min.js"></script>
    
    <script src="/assets/js/main.js"></script>
  </body>
</html>
