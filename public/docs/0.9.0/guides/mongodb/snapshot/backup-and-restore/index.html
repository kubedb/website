<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta name="theme-color" content="#2D9AED" />
    <title>KubeDB Home</title>
    
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    
    <link rel="stylesheet" href="/assets/css/font-awesome.min.css" />
    
    <link rel="stylesheet" href="/assets/css/bulma-carousel.min.css" />
    
    <link rel="stylesheet" href="/assets/css/bulma.min.css" />
    
    <link rel="stylesheet" href="/assets/css/style.css" />
    
    <link rel="stylesheet" href="/assets/css/responsive.css" />
  </head>

  <body>
    

    
    





<header>
  
  <div class="header-bottom-area header-area documentation-page" id="header">
    <div class="container section">
      <nav class="navbar">
        <div class="navbar-brand">
          <a class="navbar-item" href="./../index.html">
            <img src="/assets/images/logo-color-kube.png" alt="" />
          </a>

          <a
            role="button"
            class="navbar-burger burger"
            aria-label="menu"
            aria-expanded="false"
            data-target="acNav"
          >
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
          </a>
        </div>

        <div id="acNav" class="navbar-menu main-menu">
          <div class="navbar-end">
            
            <div class="navbar-start">
              <a href="./../pricing/index.html" class="navbar-item">
                Commercial Support
              </a>

              <div class="navbar-item has-dropdown is-hoverable">
                <a class="navbar-link">
                  Database
                </a>

                <div class="navbar-dropdown">
                  <a class="navbar-item">
                    Item-1
                  </a>
                  <a class="navbar-item">
                    Item-2
                  </a>
                  <a class="navbar-item">
                    Item-3
                  </a>
                  <hr class="navbar-divider" />
                  <a class="navbar-item">
                    Item-4
                  </a>
                </div>
              </div>

              <a href="../documentations/welcome.html" class="navbar-item">
                Documentation
              </a>
              <a class="navbar-item">
                v 0.110
              </a>
              <a class="navbar-item">
                Community
              </a>
            </div>
            
            <div class="navbar-item">
              <div class="buttons main-menu-button">
                <a class="button is-small">
                  <span><i class="fa fa-github" aria-hidden="true"></i></span
                  >Star
                </a>
                <div class="star-count">
                  565
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
    </div>
    
    <div class="documentation-menu">
      <div class="container section">
        <div class="columns is-centered">
          <div class="column is-half has-text-centered">
            
            <div class="responsive-menu">
              <a
                role="button"
                class="navbar-burger burger"
                aria-label="menu"
                aria-expanded="false"
                data-target="acNav3"
              >
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
              </a>
            </div>
            
            
            <nav class="documentation-navbar">
              <div id="acNav3" class="navbar-menu nav-menu main-menu">
                <div class="navbar-centered">
                  
                  <div class="navbar-start">
                    
                    
                      
                        
                          <a href="/docs/0.9.0/" class=" navbar-item">Welcome</a>
                        
                      
                        
                          <a href="/docs/0.9.0/concepts/" class=" navbar-item">Concepts</a>
                        
                      
                        
                          <a href="/docs/0.9.0/setup/" class=" navbar-item">Setup</a>
                        
                      
                        
                          <div class="navbar-item has-dropdown is-hoverable">
                            <a class="navbar-link">
                              Guides
                            </a>
                            <div class="navbar-dropdown">
                              
                                
                              
                                
                                  <a href="/docs/0.9.0/guides/elasticsearch/" class="navbar-item">Elasticsearch</a>
                                
                              
                                
                                  <a href="/docs/0.9.0/guides/memcached/" class="navbar-item">Memcached</a>
                                
                              
                                
                                  <a href="/docs/0.9.0/guides/mongodb/" class="navbar-item">MongoDB</a>
                                
                              
                                
                                  <a href="/docs/0.9.0/guides/mysql/" class="navbar-item">MySQL</a>
                                
                              
                                
                                  <a href="/docs/0.9.0/guides/postgres/" class="navbar-item">PostgreSQL</a>
                                
                              
                                
                                  <a href="/docs/0.9.0/guides/redis/" class="navbar-item">Redis</a>
                                
                              
                            </div>
                          </div>
                        
                      
                        
                          <a href="/docs/0.9.0/reference/" class=" navbar-item">Reference</a>
                        
                      
                    
                  </div>
                  
                </div>
              </div>
            </nav>
            
          </div>
        </div>
      </div>
    </div>
    
  </div>
  
</header>


    

    
    









<div class="documentation-area">
  <div class="container section">
    <div class="columns">
      <div class="column is-3">
        
        <div class="kd-left-sidebar">
          <div class="kd-version">
            
            <div class="control has-icons-left">
              <div class="select">
                
                
                <select>
                  
                    
                    
                      
                        <option>master</option>
                      
                    
                  
                    
                    
                      
                        <option >0.11.0</option>
                      
                    
                  
                    
                    
                      
                        <option >0.10.0</option>
                      
                    
                  
                    
                    
                      
                        <option  selected >0.9.0</option>
                      
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                      
                        <option >0.8.0</option>
                      
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                      
                        <option>0.6.0</option>
                      
                    
                  
                </select>
              </div>
              <span class="icon is-left">
                <i class="fa fa-globe"></i>
              </span>
            </div>
          </div>

          
            
            
              
            
              
            
              
            
              
                
                  

                  
                  
                    
                  
                    
                  
                    
                  
                    

                      

                    
                  
                    
                  
                    
                  
                    
                  
                
              
            
              
            
          

          
          <div class="kd-sidebar-menu">
            
              

              
              

                
              

                
              

                
              

                
                  

                  
                  

                    
                      




  



<div class="item">
  <input type="checkbox" id="9879b6b1413a637d40cb8f06cdd97cee-1" >
  <label for="9879b6b1413a637d40cb8f06cdd97cee-1"><a href="/docs/0.9.0/guides/">MongoDB</a></label>
</div>


                    
                    
                  

                    
                      
                        
                      

                    
                    
                  

                    
                      
                        
                      

                    
                    
                  

                    
                      
                        

                            
                              
                                






<div class="item">
  <input type="checkbox" id="9879b6b1413a637d40cb8f06cdd97cee-2" >
  <label for="9879b6b1413a637d40cb8f06cdd97cee-2"><a href="/docs/0.9.0/guides/mongodb/">MongoDB</a></label>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="9879b6b1413a637d40cb8f06cdd97cee-3" >
  <label for="9879b6b1413a637d40cb8f06cdd97cee-3"><a>Quickstart</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li ><a href="/docs/0.9.0/guides/mongodb/quickstart/quickstart/">Overview</a></li>
        
      
    </ul>
  </div>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="9879b6b1413a637d40cb8f06cdd97cee-4" >
  <label for="9879b6b1413a637d40cb8f06cdd97cee-4"><a>Clustering</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li ><a href="/docs/0.9.0/guides/mongodb/clustering/replication_concept/">ReplicaSet Concept</a></li>
        
      
        
          <li ><a href="/docs/0.9.0/guides/mongodb/clustering/replicaset/">ReplicaSet Guide</a></li>
        
      
    </ul>
  </div>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="9879b6b1413a637d40cb8f06cdd97cee-5" checked>
  <label for="9879b6b1413a637d40cb8f06cdd97cee-5"><a>Snapshotting</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li class="is-active"><a href="/docs/0.9.0/guides/mongodb/snapshot/backup-and-restore/">Instant Backup</a></li>
        
      
        
          <li ><a href="/docs/0.9.0/guides/mongodb/snapshot/scheduled-backup/">Scheduled Backup</a></li>
        
      
    </ul>
  </div>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="9879b6b1413a637d40cb8f06cdd97cee-6" >
  <label for="9879b6b1413a637d40cb8f06cdd97cee-6"><a>Initialization</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li ><a href="/docs/0.9.0/guides/mongodb/initialization/using-script/">Using Script</a></li>
        
      
        
          <li ><a href="/docs/0.9.0/guides/mongodb/initialization/using-snapshot/">From Snapshot</a></li>
        
      
    </ul>
  </div>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="9879b6b1413a637d40cb8f06cdd97cee-7" >
  <label for="9879b6b1413a637d40cb8f06cdd97cee-7"><a>Custom Configuration</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li ><a href="/docs/0.9.0/guides/mongodb/configuration/using-custom-config/">Quickstart</a></li>
        
      
        
          <li ><a href="/docs/0.9.0/guides/mongodb/configuration/using-crd-configuration/">Using CRD Config</a></li>
        
      
    </ul>
  </div>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="9879b6b1413a637d40cb8f06cdd97cee-8" >
  <label for="9879b6b1413a637d40cb8f06cdd97cee-8"><a>Private Registry</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li ><a href="/docs/0.9.0/guides/mongodb/private-registry/using-private-registry/">Quickstart</a></li>
        
      
    </ul>
  </div>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="9879b6b1413a637d40cb8f06cdd97cee-9" >
  <label for="9879b6b1413a637d40cb8f06cdd97cee-9"><a>Monitoring</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li ><a href="/docs/0.9.0/guides/mongodb/monitoring/using-builtin-prometheus/">Builtin Prometheus Discovery</a></li>
        
      
        
          <li ><a href="/docs/0.9.0/guides/mongodb/monitoring/using-coreos-prometheus-operator/">Coreos Prometheus Operator</a></li>
        
      
    </ul>
  </div>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="9879b6b1413a637d40cb8f06cdd97cee-10" >
  <label for="9879b6b1413a637d40cb8f06cdd97cee-10"><a>Cli</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li ><a href="/docs/0.9.0/guides/mongodb/cli/cli/">Quickstart</a></li>
        
      
    </ul>
  </div>
</div>


                              
                            

                        
                      

                    
                    
                  

                    
                      
                        
                      

                    
                    
                  

                    
                      
                        
                      

                    
                    
                  

                    
                      
                        
                      

                    
                    
                  
                  

                
              

                
              
              
            
          </div>
          
        </div>
        
      </div>
      <div class="column is-7">
        <div class="full-info">
          

<blockquote>
<p>New to KubeDB? Please start <a href="/docs/0.9.0/concepts/README">here</a>.</p>
</blockquote>

<h1 id="database-snapshots">Database Snapshots</h1>

<p>This tutorial will show you how to take snapshots of a KubeDB managed MongoDB database.</p>

<blockquote>
<p>Note: The yaml files used in this tutorial are stored in <a href="https://github.com/kubedb/cli/tree/master/docs/examples/mongodb">docs/examples/mongodb</a> folder in GitHub repository <a href="https://github.com/kubedb/cli">kubedb/cli</a>.</p>
</blockquote>

<h2 id="before-you-begin">Before You Begin</h2>

<ul>
<li><p>At first, you need to have a Kubernetes cluster, and the kubectl command-line tool must be configured to communicate with your cluster. If you do not already have a cluster, you can create one by using <a href="https://github.com/kubernetes/minikube">Minikube</a>.</p></li>

<li><p>Now, install KubeDB cli on your workstation and KubeDB operator in your cluster following the steps <a href="/docs/0.9.0/setup/install">here</a>.</p></li>

<li><p><a href="https://kubernetes.io/docs/concepts/storage/storage-classes/">StorageClass</a> is required to run KubeDB. Check the available StorageClass in cluster.</p></li>
</ul>

<pre><code class="language-console">  $ kubectl get storageclasses
  NAME                 PROVISIONER                AGE
  standard (default)   k8s.io/minikube-hostpath   4h
</code></pre>

<ul>
<li>A <code>MongoDB</code> database is needed to take snapshot for this tutorial. To keep things isolated, this tutorial uses a separate namespace called <code>demo</code> throughout this tutorial. Run the following command to prepare your cluster for this tutorial:</li>
</ul>

<pre><code class="language-console">  $ kubectl create ns demo
  namespace &quot;demo&quot; created

  $ kubectl get ns
  NAME          STATUS    AGE
  demo          Active    1m

  $ kubedb create -f https://raw.githubusercontent.com/kubedb/cli/0.9.0/docs/examples/mongodb/snapshot/demo-1.yaml
  mongodb.kubedb.com/mgo-infant created
</code></pre>

<h2 id="instant-backups">Instant Backups</h2>

<p>You can easily take a snapshot of <code>MongoDB</code> database by creating a <code>Snapshot</code> object. When a <code>Snapshot</code> object is created, KubeDB operator will launch a Job that runs the <code>mongodump</code> command and uploads the output bson file to various cloud providers S3, GCS, Azure, OpenStack Swift and/or locally mounted volumes using <a href="https://github.com/appscode/osm">osm</a>.</p>

<p>In this tutorial, snapshots will be stored in a Google Cloud Storage (GCS) bucket. To do so, a secret is needed that has the following 2 keys:</p>

<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>GOOGLE_PROJECT_ID</code></td>
<td><code>Required</code>. Google Cloud project ID</td>
</tr>

<tr>
<td><code>GOOGLE_SERVICE_ACCOUNT_JSON_KEY</code></td>
<td><code>Required</code>. Google Cloud service account json key</td>
</tr>
</tbody>
</table>

<pre><code class="language-console">$ echo -n '&lt;your-project-id&gt;' &gt; GOOGLE_PROJECT_ID
$ mv downloaded-sa-json.key &gt; GOOGLE_SERVICE_ACCOUNT_JSON_KEY
$ kubectl create secret generic mg-snap-secret -n demo \
    --from-file=./GOOGLE_PROJECT_ID \
    --from-file=./GOOGLE_SERVICE_ACCOUNT_JSON_KEY
secret/mg-snap-secret created
</code></pre>

<pre><code class="language-yaml">$ kubectl get secret mg-snap-secret -n demo -o yaml
apiVersion: v1
data:
  GOOGLE_PROJECT_ID: PHlvdXItcHJvamVjdC1pZD4=
  GOOGLE_SERVICE_ACCOUNT_JSON_KEY: ewogICJ0eXBlIjogInNlcnZpY2VfYWNjb3V...9tIgp9Cg==
kind: Secret
metadata:
  creationTimestamp: 2018-02-02T10:02:09Z
  name: mg-snap-secret
  namespace: demo
  resourceVersion: &quot;48679&quot;
  selfLink: /api/v1/namespaces/demo/secrets/mg-snap-secret
  uid: 220a7c60-0800-11e8-946f-080027c05a6e
type: Opaque
</code></pre>

<p>To lean how to configure other storage destinations for Snapshots, please visit <a href="/docs/0.9.0/concepts/snapshot">here</a>. Now, create the Snapshot object.</p>

<pre><code class="language-yaml">apiVersion: kubedb.com/v1alpha1
kind: Snapshot
metadata:
  name: snapshot-infant
  namespace: demo
  labels:
    kubedb.com/kind: MongoDB
spec:
  databaseName: mgo-infant
  storageSecretName: mg-snap-secret
  gcs:
    bucket: kubedb
</code></pre>

<pre><code class="language-console">$ kubedb create -f https://raw.githubusercontent.com/kubedb/cli/0.9.0/docs/examples/mongodb/snapshot/demo-2.yaml
snapshot.kubedb.com/snapshot-infant created

$ kubedb get snap -n demo
NAME              DATABASENAME   STATUS    AGE
snapshot-infant   mgo-infant     Running   23s
</code></pre>

<pre><code class="language-yaml">$ kubedb get snap -n demo snapshot-infant -o yaml
apiVersion: kubedb.com/v1alpha1
kind: Snapshot
metadata:
  creationTimestamp: 2018-09-24T11:09:26Z
  finalizers:
  - kubedb.com
  generation: 1
  labels:
    kubedb.com/kind: MongoDB
    kubedb.com/name: mgo-infant
    snapshot.kubedb.com/status: Running
  name: snapshot-infant
  namespace: demo
  resourceVersion: &quot;27413&quot;
  selfLink: /apis/kubedb.com/v1alpha1/namespaces/demo/snapshots/snapshot-infant
  uid: 4ce85a07-bfea-11e8-93d2-080027e2cfdd
spec:
  databaseName: mgo-infant
  gcs:
    bucket: kubedb
  storageSecretName: mg-snap-secret
status:
  phase: Running
  startTime: 2018-09-24T11:09:27Z
</code></pre>

<p>Here,</p>

<ul>
<li><code>metadata.labels</code> should include the type of database <code>kubedb.com/kind: MongoDB</code> whose snapshot will be taken.</li>
<li><code>spec.databaseName</code> points to the database whose snapshot is taken.</li>
<li><code>spec.storageSecretName</code> points to the Secret containing the credentials for snapshot storage destination.</li>
<li><code>spec.gcs.bucket</code> points to the bucket name used to store the snapshot data.</li>
</ul>

<p>You can also run the <code>kubedb describe</code> command to see the recent snapshots taken for a database.</p>

<pre><code class="language-console">$ kubedb describe mg -n demo mgo-infant
Name:               mgo-infant
Namespace:          demo
CreationTimestamp:  Mon, 24 Sep 2018 17:04:54 +0600
Labels:             &lt;none&gt;
Annotations:        &lt;none&gt;
Replicas:           1  total
Status:             Running
  StorageType:      Durable
Volume:
  StorageClass:  standard
  Capacity:      50Mi
  Access Modes:  RWO

StatefulSet:
  Name:               mgo-infant
  CreationTimestamp:  Mon, 24 Sep 2018 17:04:59 +0600
  Labels:               kubedb.com/kind=MongoDB
                        kubedb.com/name=mgo-infant
  Annotations:        &lt;none&gt;
  Replicas:           824641944540 desired | 1 total
  Pods Status:        1 Running / 0 Waiting / 0 Succeeded / 0 Failed

Service:
  Name:         mgo-infant
  Labels:         kubedb.com/kind=MongoDB
                  kubedb.com/name=mgo-infant
  Annotations:  &lt;none&gt;
  Type:         ClusterIP
  IP:           10.106.56.236
  Port:         db  27017/TCP
  TargetPort:   db/TCP
  Endpoints:    172.17.0.5:27017

Service:
  Name:         mgo-infant-gvr
  Labels:         kubedb.com/kind=MongoDB
                  kubedb.com/name=mgo-infant
  Annotations:    service.alpha.kubernetes.io/tolerate-unready-endpoints=true
  Type:         ClusterIP
  IP:           None
  Port:         db  27017/TCP
  TargetPort:   27017/TCP
  Endpoints:    172.17.0.5:27017

Database Secret:
  Name:         mgo-infant-auth
  Labels:         kubedb.com/kind=MongoDB
                  kubedb.com/name=mgo-infant
  Annotations:  &lt;none&gt;
  
Type:  Opaque
  
Data
====
  user:      4 bytes
  password:  16 bytes

Snapshots:
  Name             Bucket     StartTime                        CompletionTime                   Phase
  ----             ------     ---------                        --------------                   -----
  snapshot-infant  gs:kubedb  Mon, 24 Sep 2018 17:09:27 +0600  Mon, 24 Sep 2018 17:10:17 +0600  Succeeded

Events:
  Type    Reason              Age   From              Message
  ----    ------              ----  ----              -------
  Normal  Successful          6m    MongoDB operator  Successfully created Service
  Normal  Successful          5m    MongoDB operator  Successfully created StatefulSet
  Normal  Successful          5m    MongoDB operator  Successfully created MongoDB
  Normal  Successful          5m    MongoDB operator  Successfully patched StatefulSet
  Normal  Successful          5m    MongoDB operator  Successfully patched MongoDB
  Normal  Successful          5m    MongoDB operator  Successfully patched StatefulSet
  Normal  Successful          5m    MongoDB operator  Successfully patched MongoDB
  Normal  Starting            2m    Job Controller    Backup running
  Normal  SuccessfulSnapshot  1m    Job Controller    Successfully completed snapshot
</code></pre>

<p>Once the snapshot Job is complete, you should see the output of the <code>mongodump</code> command stored in the GCS bucket.</p>

<p><img src="/docs/0.9.0/images/mongodb/mgo-xyz-snapshot.png" alt="snapshot-console" /></p>

<p>From the above image, you can see that the snapshot output is stored in a folder called <code>{bucket}/kubedb/{namespace}/{mongodb-object}/{snapshot}/</code>.</p>

<h2 id="restore-from-snapshot">Restore from Snapshot</h2>

<p>You can create a new database from a previously taken Snapshot. Specify the Snapshot name in the <code>spec.init.snapshotSource</code> field of a new MongoDB object. See the example <code>mgo-recovered</code> object below:</p>

<pre><code class="language-yaml">apiVersion: kubedb.com/v1alpha1
kind: MongoDB
metadata:
  name: mgo-recovered
  namespace: demo
spec:
  version: &quot;3.4-v1&quot;
  storage:
    storageClassName: &quot;standard&quot;
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 50Mi
  init:
    snapshotSource:
      name: snapshot-infant
      namespace: demo
</code></pre>

<pre><code class="language-console">$ kubedb create -f https://raw.githubusercontent.com/kubedb/cli/0.9.0/docs/examples/mongodb/snapshot/demo-3.yaml
mongodb.kubedb.com/mgo-recovered created
</code></pre>

<p>Here,</p>

<ul>
<li><code>spec.init.snapshotSource.name</code> refers to a Snapshot object for a MongoDB database in the same namespaces as this new <code>mgo-recovered</code> MongoDB object.</li>
</ul>

<p>Now, wait several seconds. KubeDB operator will create a new StatefulSet. Then KubeDB operator launches a Kubernetes Job to initialize the new database using the data from <code>snapshot-infant</code> Snapshot.</p>

<pre><code class="language-console">$ kubedb get mg -n demo
NAME            VERSION   STATUS         AGE
mgo-infant      3.4-v1    Running        13m
mgo-recovered   3.4-v1    Initializing   57s

$ kubedb get mg -n demo
NAME            VERSION   STATUS    AGE
mgo-infant      3.4-v1    Running   13m
mgo-recovered   3.4-v1    Running   1m

$ kubedb describe mg -n demo mgo-recovered
Name:               mgo-recovered
Namespace:          demo
CreationTimestamp:  Mon, 24 Sep 2018 17:17:14 +0600
Labels:             &lt;none&gt;
Annotations:        kubedb.com/initialized=
Replicas:           1  total
Status:             Running
  StorageType:      Durable
Volume:
  StorageClass:  standard
  Capacity:      50Mi
  Access Modes:  RWO

StatefulSet:
  Name:               mgo-recovered
  CreationTimestamp:  Mon, 24 Sep 2018 17:17:20 +0600
  Labels:               kubedb.com/kind=MongoDB
                        kubedb.com/name=mgo-recovered
  Annotations:        &lt;none&gt;
  Replicas:           824642112848 desired | 1 total
  Pods Status:        1 Running / 0 Waiting / 0 Succeeded / 0 Failed

Service:
  Name:         mgo-recovered
  Labels:         kubedb.com/kind=MongoDB
                  kubedb.com/name=mgo-recovered
  Annotations:  &lt;none&gt;
  Type:         ClusterIP
  IP:           10.100.10.221
  Port:         db  27017/TCP
  TargetPort:   db/TCP
  Endpoints:    172.17.0.6:27017

Service:
  Name:         mgo-recovered-gvr
  Labels:         kubedb.com/kind=MongoDB
                  kubedb.com/name=mgo-recovered
  Annotations:    service.alpha.kubernetes.io/tolerate-unready-endpoints=true
  Type:         ClusterIP
  IP:           None
  Port:         db  27017/TCP
  TargetPort:   27017/TCP
  Endpoints:    172.17.0.6:27017

Database Secret:
  Name:         mgo-recovered-auth
  Labels:         kubedb.com/kind=MongoDB
                  kubedb.com/name=mgo-recovered
  Annotations:  &lt;none&gt;
  
Type:  Opaque
  
Data
====
  password:  16 bytes
  user:      4 bytes

No Snapshots.

Events:
  Type    Reason                Age   From              Message
  ----    ------                ----  ----              -------
  Normal  Successful            2m    MongoDB operator  Successfully created Service
  Normal  Successful            2m    MongoDB operator  Successfully created MongoDB
  Normal  Successful            2m    MongoDB operator  Successfully created StatefulSet
  Normal  Initializing          2m    MongoDB operator  Initializing from Snapshot: &quot;snapshot-infant&quot;
  Normal  Successful            2m    MongoDB operator  Successfully patched StatefulSet
  Normal  Successful            2m    MongoDB operator  Successfully patched MongoDB
  Normal  SuccessfulInitialize  1m    Job Controller    Successfully completed initialization
  Normal  Successful            1m    MongoDB operator  Successfully patched MongoDB
  Normal  Successful            1m    MongoDB operator  Successfully patched StatefulSet
  Normal  Initializing          1m    MongoDB operator  Initializing from Snapshot: &quot;snapshot-infant&quot;
  Normal  Successful            1m    MongoDB operator  Successfully patched StatefulSet
  Normal  Successful            1m    MongoDB operator  Successfully patched MongoDB
  Normal  Successful            1m    MongoDB operator  Successfully patched StatefulSet
  Normal  Successful            1m    MongoDB operator  Successfully patched MongoDB
  Normal  SuccessfulInitialize  1m    Job Controller    Successfully completed initialization
</code></pre>

<h2 id="cleaning-up">Cleaning up</h2>

<p>To cleanup the Kubernetes resources created by this tutorial, run:</p>

<pre><code class="language-console">kubectl patch -n demo mg/mgo-infant mg/mgo-recovered -p '{&quot;spec&quot;:{&quot;terminationPolicy&quot;:&quot;WipeOut&quot;}}' --type=&quot;merge&quot;
kubectl delete -n demo mg/mgo-infant mg/mgo-recovered

kubectl patch -n demo drmn/mgo-infant drmn/mgo-recovered -p '{&quot;spec&quot;:{&quot;wipeOut&quot;:true}}' --type=&quot;merge&quot;
kubectl delete -n demo drmn/mgo-infant drmn/mgo-recovered

kubectl delete ns demo
</code></pre>

<h2 id="next-steps">Next Steps</h2>

<ul>
<li>See the list of supported storage providers for snapshots <a href="/docs/0.9.0/concepts/snapshot">here</a>.</li>
<li>Take <a href="/docs/0.9.0/guides/mongodb/snapshot/scheduled-backup">Scheduled Snapshot</a> of MongoDB databases using KubeDB.</li>
<li>Initialize <a href="/docs/0.9.0/guides/mongodb/initialization/using-script">MongoDB with Script</a>.</li>
<li>Initialize <a href="/docs/0.9.0/guides/mongodb/initialization/using-snapshot">MongoDB with Snapshot</a>.</li>
<li>Monitor your MongoDB database with KubeDB using <a href="/docs/0.9.0/guides/mongodb/monitoring/using-coreos-prometheus-operator">out-of-the-box CoreOS Prometheus Operator</a>.</li>
<li>Monitor your MongoDB database with KubeDB using <a href="/docs/0.9.0/guides/mongodb/monitoring/using-builtin-prometheus">out-of-the-box builtin-Prometheus</a>.</li>
<li>Use <a href="/docs/0.9.0/guides/mongodb/private-registry/using-private-registry">private Docker registry</a> to deploy MongoDB with KubeDB.</li>
<li>Detail concepts of <a href="/docs/0.9.0/concepts/databases/mongodb">MongoDB object</a>.</li>
<li>Detail concepts of <a href="/docs/0.9.0/concepts/catalog/mongodb">MongoDBVersion object</a>.</li>
<li>Want to hack on KubeDB? Check our <a href="/docs/0.9.0/CONTRIBUTING">contribution guidelines</a>.</li>
</ul>

        </div>
      </div>
      <div class="column is-2">
        <div class="right-sidebar-area">
          
          <div class="search-area">
            <form action="#">
              <input type="text" placeholder="Search..." />
              <button class="search-button">
                <i class="fa fa-search" aria-hidden="true"></i>
              </button>
            </form>
          </div>
          

          
          <div class="tbl-of-contents">
            <h4>What's on this Page</h4>
            <nav id="TableOfContents">
<ul>
<li><a href="#database-snapshots">Database Snapshots</a>
<ul>
<li><a href="#before-you-begin">Before You Begin</a></li>
<li><a href="#instant-backups">Instant Backups</a></li>
<li><a href="#restore-from-snapshot">Restore from Snapshot</a></li>
<li><a href="#cleaning-up">Cleaning up</a></li>
<li><a href="#next-steps">Next Steps</a></li>
</ul></li>
</ul>
</nav>
          </div>
          
        </div>
      </div>
    </div>
  </div>
</div>



    
    
<section></section>

    

    
    
<section></section>

    

    
    
    <section class="cta-area section-padding pt-0">
      <div class="container section">
        <div class="cta-padding">
          <div class="columns">
            <div class="column is-6">
              
              <div class="cta-text">
                <h2>Ready to get Start?</h2>
                <p>Create a Free Account and refer your friend</p>
              </div>
              
            </div>
            <div class="column is-6 has-text-right is-mobile">
              <div class="cta-button d-table">
                
                <div class="cta-button-inner d-table-cell">
                  <a href="#" class="button kd-button kd-primary"
                    >Try Now for FREE</a
                  >
                </div>
                
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    

    
    
    <footer class="footer-area">
      <div class="footer-top">
        <div class="container section">
          <div class="columns">
            <div class="column is-4">
              <div class="single-footer-widget">
                
                <div class="footer-logo">
                  <a href="#"
                    ><img
                      src="/assets/images/logo-color-appscode.png"
                      alt=""
                      class="img"
                  /></a>
                </div>
                

                
                <div class="subscription-form">
                  <form action="#">
                    <label for="email">Subscribe Our Newsletter</label>
                    <div class="field has-addons">
                      <div class="control">
                        <input
                          class="input"
                          name="email"
                          id="email"
                          type="email"
                          placeholder="info@gmail.com"
                        />
                      </div>
                      <div class="control">
                        <a class="button kd-primary">
                          <i class="fa fa-paper-plane-o" aria-hidden="true"></i>
                        </a>
                      </div>
                    </div>
                  </form>
                </div>
                

                
                <div class="contact-information">
                  <h4>Have any Inquiry?</h4>
                  <ul class="all-contact-info">
                    <li>
                      <a href="callto:+123456789"
                        ><span
                          ><i class="fa fa-phone" aria-hidden="true"></i></span
                        >+123 456 789</a
                      >
                    </li>

                    <li>
                      <a href="mailto:appscode@gmail.com"
                        ><span
                          ><i
                            class="fa fa-envelope-o"
                            aria-hidden="true"
                          ></i></span
                        >appscode@gmail.com</a
                      >
                    </li>
                  </ul>
                </div>
                
              </div>
            </div>

            <div class="column is-2">
              <div class="single-footer-widget">
                
                <div class="footer-menu">
                  <h4>Products</h4>
                  <ul class="footer-link">
                    <li><a href="#">Voyager</a></li>
                    <li><a href="#">KubeDB</a></li>
                    <li><a href="#">Pharmer Stash </a></li>
                    <li><a href="#">Service Broker</a></li>
                    <li><a href="#">Kubed</a></li>
                    <li><a href="#">Guard</a></li>
                    <li><a href="#">Swift</a></li>
                    <li><a href="#">Searchlight</a></li>
                  </ul>
                </div>
                
              </div>
            </div>

            <div class="column is-2">
              <div class="single-footer-widget">
                
                <div class="footer-menu">
                  <h4>Offerings</h4>
                  <ul class="footer-link">
                    <li><a href="#">Products</a></li>
                    <li><a href="#">Services</a></li>
                    <li><a href="#">Open source </a></li>
                  </ul>
                </div>
                
              </div>
            </div>

            <div class="column is-2">
              <div class="single-footer-widget">
                
                <div class="footer-menu">
                  <h4>Company</h4>
                  <ul class="footer-link">
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">blog</a></li>
                    <li><a href="#">Seles Inquiry</a></li>
                    <li><a href="#">Contact Us</a></li>
                  </ul>
                </div>
                
              </div>
            </div>

            <div class="column is-2">
              <div class="single-footer-widget">
                
                <div class="footer-menu">
                  <h4>Legal</h4>
                  <ul class="footer-link">
                    <li><a href="#">Service Level Agreement</a></li>
                    <li><a href="#">Security</a></li>
                    <li><a href="#">Learn More</a></li>
                    <li><a href="#">Contact Us</a></li>
                  </ul>
                </div>
                
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <div class="container section">
          <div class="columns">
            <div class="column is-4">
              <p>All rights reserved Â© 2018. Appscode, Inc..</p>
            </div>
            <div class="column is-4 is-mobile has-text-centered">
              <div class="footer-inline-link">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
              </div>
            </div>
            <div class="column is-4 is-mobile has-text-right">
              <div class="socail-link-inline">
                <ul>
                  <li>
                    <a href="#"
                      ><i class="fa fa-twitter" aria-hidden="true"></i
                    ></a>
                  </li>
                  <li>
                    <a href="#"
                      ><i class="fa fa-facebook" aria-hidden="true"></i
                    ></a>
                  </li>
                  <li>
                    <a href="#"
                      ><i class="fa fa-github" aria-hidden="true"></i
                    ></a>
                  </li>
                  <li>
                    <a href="#"
                      ><i class="fa fa-youtube" aria-hidden="true"></i
                    ></a>
                  </li>
                  <li>
                    <a href="#"
                      ><i class="fa fa-twitter" aria-hidden="true"></i
                    ></a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>
    
    

    
    <script src="/assets/js/bulma-carousel.min.js"></script>
    
    <script src="/assets/js/main.js"></script>
  </body>
</html>
