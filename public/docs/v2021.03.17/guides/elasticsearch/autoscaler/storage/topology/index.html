<!doctype html><html lang=en><head><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-62096468-4','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=theme-color content="#4D4DCB"><title>KubeDB by AppsCode</title><meta name=description content="KubeDB by AppsCode simplifies and automates routine database tasks such as provisioning, patching, backup, recovery, failure detection, and repair for various popular databases on private and public clouds"><meta name=author content="AppsCode Inc."><meta name=keywords content="kubernetes appscode databsse high availability postgres elasticsearch etcd memecached mongodb mysql percona xtradb redis"><link rel=apple-touch-icon sizes=57x57 href=/assets/images/products/kubedb/icons/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/assets/images/products/kubedb/icons/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/assets/images/products/kubedb/icons/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/assets/images/products/kubedb/icons/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/assets/images/products/kubedb/icons/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/assets/images/products/kubedb/icons/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/assets/images/products/kubedb/icons/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/assets/images/products/kubedb/icons/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/assets/images/products/kubedb/icons/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/assets/images/products/kubedb/icons/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/assets/images/products/kubedb/icons/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/assets/images/products/kubedb/icons/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/assets/images/products/kubedb/icons/favicon-16x16.png><link rel=manifest href=/assets/images/products/kubedb/icons/manifest.json><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/assets/images/products/kubedb/icons/ms-icon-144x144.png"><meta itemprop=name content="KubeDB by AppsCode"><meta itemprop=description content="KubeDB by AppsCode simplifies and automates routine database tasks such as provisioning, patching, backup, recovery, failure detection, and repair for various popular databases on private and public clouds"><meta itemprop=image content="https://kubedb.com/assets/images/products/kubedb/kubedb-1280x640.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@KubeDB"><meta name=twitter:title content="KubeDB by AppsCode"><meta name=twitter:creator content="@KubeDB"><meta name=twitter:description content="KubeDB by AppsCode simplifies and automates routine database tasks such as provisioning, patching, backup, recovery, failure detection, and repair for various popular databases on private and public clouds"><meta name=twitter:image:src content="https://kubedb.com/assets/images/products/kubedb/kubedb-1280x640.png"><meta property="og:url" content="https://kubedb.com"><meta property="og:title" content="KubeDB by AppsCode"><meta property="og:description" content="KubeDB by AppsCode simplifies and automates routine database tasks such as provisioning, patching, backup, recovery, failure detection, and repair for various popular databases on private and public clouds"><meta property="og:site_name" content="KubeDB by AppsCode"><meta property="og:image" content="https://kubedb.com/assets/images/products/kubedb/kubedb-1280x640.png"><meta property="og:type" content="article"><link rel=stylesheet href=/assets/css/font-awesome.min.css><link href=https://unpkg.com/aos@2.3.1/dist/aos.css rel=stylesheet><link rel=stylesheet href=/assets/css/bulma-carousel.min.css><link rel=stylesheet href=/assets/css/bulma-tooltip.min.css><link rel=stylesheet href=/assets/css/bulma.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/keen-slider@latest/keen-slider.min.css><link rel=stylesheet href=/assets/sass/main.min.5d2c0297a6ff960daed9d0bfe02ddc681d62b160aafc866ad48d2745f78048d9.css></head><body class=kubedb><header><div class=header-top><div class="container section"><nav class=navbar><div class=navbar-brand><a class=navbar-item href=https://appscode.com><img src=/assets/images/products/appscode/appscode.png alt=AppsCode></a>
<a role=button class="navbar-burger burger" aria-label=menu aria-expanded=false data-target=acNav1><span aria-hidden=true></span><span aria-hidden=true></span><span aria-hidden=true></span></a></div><div id=acNav1 class="navbar-menu main-menu"><div class=navbar-end><div class=navbar-start><div class="navbar-item has-dropdown ac-is-hoverable"><a class=navbar-link>Products</a><div class=ac-megamenu><div class=columns><div class="column is-6"><div class=columns><div class="column is-12 br-1"><a href=https://kubedb.com class="single-product-item is-kubedb"><div class=menu-header><div class=menu-logo><img src=/assets/images/products/kubedb/kubedb-icon.png alt=KubeDB></div><h5>KubeDB</h5></div><div class=menu-body><p>Run production-grade Databases on Kubernetes</p></div></a><a href=https://stash.run class="single-product-item is-stash"><div class=menu-header><div class=menu-logo><img src=/assets/images/products/stash/stash-icon.png alt=Stash></div><h5>Stash</h5></div><div class=menu-body><p>Backup your Kubernetes Stateful Applications</p></div></a><a href=https://kubevault.com class="single-product-item is-kubevault"><div class=menu-header><div class=menu-logo><img src=/assets/images/products/kubevault/kubevault-icon.png alt=KubeVault></div><h5>KubeVault</h5></div><div class=menu-body><p>Tools for running HashiCorp Vault on Kubernetes</p></div></a></div></div></div><div class="column is-6"><div class=columns><div class="column is-12"><a href=https://byte.builders class="single-product-item byte-builder kd-orange"><div class=menu-header><p class=intro>Introducing....</p><h5>ByteBuilders</h5></div><div class=menu-body><p>Cloud reimagined for the age of Kubernetes</p></div><p class=learn-more-btn>Learn more
<span class=icon><i class="fa fa-long-arrow-right" aria-hidden=true></i></span></p></a><a href=https://kubeform.cloud class="single-product-item is-kubeform"><div class=menu-header><div class=menu-logo><img src=/assets/images/products/kubeform/kubeform-icon.png alt=Kubeform></div><h5>Kubeform</h5></div><div class=menu-body><p>Provision cloud resources using Kubernetes CRDs & Terraform</p></div></a></div></div></div></div></div></div><div class="navbar-item has-dropdown ac-is-hoverable"><a class=navbar-link>Open Source</a><div class=ac-megamenu><div class=columns><div class="column is-6"><div class=columns><div class="column is-12 br-1"><a href=https://voyagermesh.com class="single-product-item is-voyager"><div class=menu-header><div class=menu-logo><img src=/assets/images/products/voyager/voyager-icon.png alt=Voyager></div><h5>Voyager</h5></div><div class=menu-body><p>Secure HAProxy Ingress Controller for
Kubernetes</p></div></a><a href=https://appscode.com/products/guard/ class="single-product-item is-guard"><div class=menu-header><div class=menu-logo><img src=/assets/images/products/guard/guard-icon.png alt=Guard></div><h5>Guard</h5></div><div class=menu-body><p>Kubernetes Authentication WebHook Server</p></div></a><a href=https://appscode.com/products/kubed/ class="single-product-item is-kubed"><div class=menu-header><div class=menu-logo><img src=/assets/images/products/kubed/kubed-icon.png alt=Kubed></div><h5>Kubed</h5></div><div class=menu-body><p>Kubernetes cluster manager daemon</p></div></a></div></div></div><div class="column is-6"><div class=columns><div class="column is-12"><a href=https://pharmer.cloud class="single-product-item is-pharmer"><div class=menu-header><div class=menu-logo><img src=/assets/images/products/pharmer/pharmer-icon.png alt=Pharmer></div><h5>Pharmer</h5></div><div class=menu-body><p>Kubernetes Cluster Manager using Kubeadm & Cluster API</p></div></a><a href=https://appscode.com/products/swift/ class="single-product-item is-swift"><div class=menu-header><div class=menu-logo><img src=/assets/images/products/swift/swift-icon.png alt=Swift></div><h5>Swift</h5></div><div class=menu-body><p>Ajax friendly Helm Tiller Proxy</p></div></a><a href=https://appscode.com/products/searchlight/ class="single-product-item is-searchlight"><div class=menu-header><div class=menu-logo><img src=/assets/images/products/searchlight/searchlight-icon.png alt=Searchlight></div><h5>Searchlight</h5></div><div class=menu-body><p>Alerts for Kubernetes</p></div></a></div></div></div></div></div></div><div class="navbar-item has-dropdown ac-is-hoverable"><a class=navbar-link>Services</a><div class=ac-dropdown><a class=navbar-item href=https://appscode.com/consulting/>Consulting</a>
<a class=navbar-item href=https://appscode.com/training/>Training</a>
<a class=navbar-item href=https://appscode.com/support/>Support</a></div></div><a class=navbar-item href=https://blog.byte.builders>Blog</a>
<a class=navbar-item href=https://appscode.com/contact/>Contact Us</a></div><div class=navbar-item><div class="buttons main-menu-button-top"><a class="button is-small for-chat" href=https://slack.appscode.com><span><img src=/assets/images/icon/slack.png alt></span>Slack</a>
<a class="button is-small for-support" href=https://appscode.freshdesk.com><span><img src=/assets/images/icon/chat.png alt></span>Support Portal</a></div></div></div></div></nav></div></div><div class="header-bottom-area header-area kubedb-primary-bg customize-kubedb fixed-menu"><div class="container section"><nav class=navbar><div class=navbar-brand><a class=navbar-item href=https://kubedb.com><img src=/assets/images/products/kubedb/kubedb-white.png alt=KubeDB></a>
<a role=button class="navbar-burger burger" aria-label=menu aria-expanded=false data-target=acNav><span aria-hidden=true></span><span aria-hidden=true></span><span aria-hidden=true></span></a></div><div id=acNav class="navbar-menu main-menu"><div class=navbar-end><div class=navbar-start><a href=/features/ class=navbar-item>Features</a>
<a href=/pricing/ class=navbar-item>Pricing</a><div class="navbar-item has-dropdown ac-is-hoverable"><a class=navbar-link>Databases</a><div class=ac-dropdown><a class=navbar-item href=/docs/v2021.03.17/guides/elasticsearch/>Elasticsearch</a>
<a class=navbar-item href=/docs/v2021.03.17/guides/mariadb/>MariaDB</a>
<a class=navbar-item href=/docs/v2021.03.17/guides/memcached/>Memcached</a>
<a class=navbar-item href=/docs/v2021.03.17/guides/mongodb/>MongoDB</a>
<a class=navbar-item href=/docs/v2021.03.17/guides/mysql/>MySQL</a>
<a class=navbar-item href=/docs/v2021.03.17/guides/percona-xtradb/>Percona XtraDB</a>
<a class=navbar-item href=/docs/v2021.03.17/guides/pgbouncer/>PgBouncer</a>
<a class=navbar-item href=/docs/v2021.03.17/guides/postgres/>PostgreSQL</a>
<a class=navbar-item href=/docs/v2021.03.17/guides/proxysql/>ProxySQL</a>
<a class=navbar-item href=/docs/v2021.03.17/guides/redis/>Redis</a></div></div><a href=/docs/v2021.03.17/welcome/ class=navbar-item>Documentation</a><div class="navbar-item has-dropdown ac-is-hoverable"><a class=navbar-link>Community</a><div class=ac-dropdown><a href=https://github.com/kubedb class=navbar-item>GitHub</a>
<a href=https://twitter.com/KubeDB class=navbar-item>Twitter</a>
<a href=http://slack.kubernetes.io/ class=navbar-item>Slack</a></div></div></div><div class=navbar-item><div class="buttons main-menu-button"><img style=height:24px alt="GitHub Stars" src="https://img.shields.io/badge/dynamic/json?style=flat&labelColor=1B3D4B&color=06A64F&logoColor=white&logo=github&label=stars&query=%24.stars&url=https://github-stars.appscode.workers.dev/user/kubedb">
&nbsp;&nbsp;&nbsp;
<img style=height:24px alt="GitHub Forks" src="https://img.shields.io/badge/dynamic/json?style=flat&labelColor=1B3D4B&color=06A64F&logoColor=white&logo=github&label=forks&query=%24.forks&url=https://github-stars.appscode.workers.dev/user/kubedb">
&nbsp;&nbsp;&nbsp;
<img style=height:24px alt="Docker Pulls" src="https://img.shields.io/docker/pulls/kubedb/operator?style=flat&labelColor=1B3D4B&color=06A64F&logoColor=white&logo=docker&label=pulls"></div></div></div></div></nav></div></div><div class=documentation-menu><div class="container section"><div class=is-centered><div class="is-half has-text-centered-desktop"><div class=responsive-menu><a role=button class="navbar-burger burger" aria-label=menu aria-expanded=false data-target=acNav3><span aria-hidden=true></span><span aria-hidden=true></span><span aria-hidden=true></span></a></div><nav class=documentation-navbar><div id=acNav3 class="navbar-menu nav-menu main-menu"><div class=navbar-centered><div class=navbar-start><a href=/docs/v2021.03.17/ class=navbar-item>Welcome</a>
<a href=/docs/v2021.03.17/overview/ class=navbar-item>Overview</a>
<a href=/docs/v2021.03.17/setup/ class=navbar-item>Setup</a><div class="navbar-item has-dropdown ac-is-hoverable"><a class=navbar-link>Guides</a><div class=ac-dropdown><a href=/docs/v2021.03.17/guides/elasticsearch/ class=navbar-item>Elasticsearch</a>
<a href=/docs/v2021.03.17/guides/mariadb/ class=navbar-item>MariaDB</a>
<a href=/docs/v2021.03.17/guides/memcached/ class=navbar-item>Memcached</a>
<a href=/docs/v2021.03.17/guides/mongodb/ class=navbar-item>MongoDB</a>
<a href=/docs/v2021.03.17/guides/mysql/ class=navbar-item>MySQL</a>
<a href=/docs/v2021.03.17/guides/percona-xtradb/ class=navbar-item>Percona XtraDB</a>
<a href=/docs/v2021.03.17/guides/pgbouncer/ class=navbar-item>PgBouncer</a>
<a href=/docs/v2021.03.17/guides/postgres/ class=navbar-item>PostgreSQL</a>
<a href=/docs/v2021.03.17/guides/proxysql/ class=navbar-item>ProxySQL</a>
<a href=/docs/v2021.03.17/guides/redis/ class=navbar-item>Redis</a></div></div><div class="navbar-item has-dropdown ac-is-hoverable"><a class=navbar-link>Reference</a><div class=ac-dropdown><a href=/docs/v2021.03.17/reference/operator/ class=navbar-item>KubeDB Operator</a>
<a href=/docs/v2021.03.17/reference/cli/ class=navbar-item>KubeDB CLI</a></div></div></div></div></div></nav></div></div></div></div></header><div class=documentation-area><div class="container section"><div class=columns><div class="column is-3"><div class=kd-left-sidebar><div class=trial-button><a href=/docs/v2021.03.17/setup/ class="button is-fullwidth">Try Now for FREE!</a></div><div class=kd-version><div class=dropdown><div class=dropdown-trigger><button class="button is-fullwidth" aria-haspopup=true aria-controls=dropdown-menu3>
<span><strong class=icon><i class="fa fa-cog" aria-hidden=true></i></strong>v2021.03.17</span>
<span class=new-item>Latest</span>
<span class="icon is-small"><i class="fa fa-angle-down" aria-hidden=true></i></span></button></div><div class=dropdown-menu id=dropdown-menu3 role=menu><div class=dropdown-content><a href=https://github.com/kubedb/docs/tree/master/docs target=_blank class=dropdown-item>master</a>
<a href=/docs/v2021.03.17/ class=dropdown-item>v2021.03.17<div class=tag>Latest</div></a><a href=/docs/v2021.01.26/ class=dropdown-item>v2021.01.26</a>
<a href=/docs/v2021.01.15/ class=dropdown-item>v2021.01.15</a>
<a href=/docs/v2021.01.02-rc.0/ class=dropdown-item>v2021.01.02-rc.0</a>
<a href=/docs/v2020.12.10/ class=dropdown-item>v2020.12.10</a>
<a href=/docs/v2020.11.12/ class=dropdown-item>v2020.11.12</a>
<a href=/docs/v2020.11.11/ class=dropdown-item>v2020.11.11</a>
<a href=/docs/v2020.11.08/ class=dropdown-item>v2020.11.08</a>
<a href=/docs/v2020.10.28/ class=dropdown-item>v2020.10.28</a>
<a href=/docs/v0.13.0-rc.0/ class=dropdown-item>v0.13.0-rc.0</a>
<a href=/docs/0.12.0/ class=dropdown-item>0.12.0</a></div></div></div></div><div class=kd-sidebar-menu><div class=item><input type=checkbox id=66e5a6bce0d6e1d6394b7d1e61f6280c-1>
<label for=66e5a6bce0d6e1d6394b7d1e61f6280c-1><a href=/docs/v2021.03.17/guides/>Elasticsearch</a></label></div><div class=item><input type=checkbox id=66e5a6bce0d6e1d6394b7d1e61f6280c-2>
<label for=66e5a6bce0d6e1d6394b7d1e61f6280c-2><a href=/docs/v2021.03.17/guides/elasticsearch/>Elasticsearch</a></label></div><div class=item><input type=checkbox id=66e5a6bce0d6e1d6394b7d1e61f6280c-3>
<label for=66e5a6bce0d6e1d6394b7d1e61f6280c-3><a>Quickstart</a> <span><i class="fa fa-angle-right" aria-hidden=true></i></span></label><div class=item><ul><li><a href=/docs/v2021.03.17/guides/elasticsearch/quickstart/overview/>Overview</a></li></ul></div></div><div class=item><input type=checkbox id=66e5a6bce0d6e1d6394b7d1e61f6280c-4>
<label for=66e5a6bce0d6e1d6394b7d1e61f6280c-4><a>Concepts</a> <span><i class="fa fa-angle-right" aria-hidden=true></i></span></label><div class=item><ul><li><a href=/docs/v2021.03.17/guides/elasticsearch/concepts/elasticsearch/>Elasticsearch</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/concepts/elasticsearch-ops-request/>ElasticsearchOpsRequest</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/concepts/catalog/>ElasticsearchVersion</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/concepts/appbinding/>AppBinding</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/concepts/autoscaler/>ElasticsearchAutoscaler</a></li></ul></div></div><div class=item><input type=checkbox id=66e5a6bce0d6e1d6394b7d1e61f6280c-5>
<label for=66e5a6bce0d6e1d6394b7d1e61f6280c-5><a>Clustering</a> <span><i class="fa fa-angle-right" aria-hidden=true></i></span></label><div class=item><ul><li><a href=/docs/v2021.03.17/guides/elasticsearch/clustering/combined-cluster/>Combined Cluster</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/clustering/topology-cluster/>Topology Cluster</a></li></ul></div></div><div class=item><input type=checkbox id=66e5a6bce0d6e1d6394b7d1e61f6280c-6>
<label for=66e5a6bce0d6e1d6394b7d1e61f6280c-6><a>Custom Configuration</a> <span><i class="fa fa-angle-right" aria-hidden=true></i></span></label><div class=item><ul><li><a href=/docs/v2021.03.17/guides/elasticsearch/configuration/overview/>Overview</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/configuration/combined-cluster/>Combined Cluster</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/configuration/topology-cluster/>Topology Cluster</a></li></ul></div></div><div class=item><input type=checkbox id=66e5a6bce0d6e1d6394b7d1e61f6280c-7>
<label for=66e5a6bce0d6e1d6394b7d1e61f6280c-7><a>Custom RBAC</a> <span><i class="fa fa-angle-right" aria-hidden=true></i></span></label><div class=item><ul><li><a href=/docs/v2021.03.17/guides/elasticsearch/custom-rbac/using-custom-rbac/>Custom RBAC</a></li></ul></div></div><div class=item><input type=checkbox id=66e5a6bce0d6e1d6394b7d1e61f6280c-8>
<label for=66e5a6bce0d6e1d6394b7d1e61f6280c-8><a>Private Registry</a> <span><i class="fa fa-angle-right" aria-hidden=true></i></span></label><div class=item><ul><li><a href=/docs/v2021.03.17/guides/elasticsearch/private-registry/using-private-registry/>Quickstart</a></li></ul></div></div><div class=item><input type=checkbox id=66e5a6bce0d6e1d6394b7d1e61f6280c-9>
<label for=66e5a6bce0d6e1d6394b7d1e61f6280c-9><a>Backup & Restore</a> <span><i class="fa fa-angle-right" aria-hidden=true></i></span></label><div class=item><ul><li><a href=/docs/v2021.03.17/guides/elasticsearch/backup/overview/>Overview</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/backup/kubedb/>Scheduled Backup</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/backup/auto-backup/>Auto-Backup</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/backup/customization/>Customizing Backup & Restore Process</a></li></ul></div></div><div class=item><input type=checkbox id=66e5a6bce0d6e1d6394b7d1e61f6280c-10 checked>
<label for=66e5a6bce0d6e1d6394b7d1e61f6280c-10><a>Autoscaling</a> <span><i class="fa fa-angle-right" aria-hidden=true></i></span></label><div class=item><ul><div class=item><input type=checkbox id=66e5a6bce0d6e1d6394b7d1e61f6280c-11>
<label for=66e5a6bce0d6e1d6394b7d1e61f6280c-11><a>Compute Autoscaling</a> <span><i class="fa fa-angle-right" aria-hidden=true></i></span></label><div class=item><ul><li><a href=/docs/v2021.03.17/guides/elasticsearch/autoscaler/compute/overview/>Overview</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/autoscaler/compute/combined/>Combined</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/autoscaler/compute/topology/>Topology Cluster</a></li></ul></div></div><div class=item><input type=checkbox id=66e5a6bce0d6e1d6394b7d1e61f6280c-12 checked>
<label for=66e5a6bce0d6e1d6394b7d1e61f6280c-12><a>Storage Autoscaling</a> <span><i class="fa fa-angle-right" aria-hidden=true></i></span></label><div class=item><ul><li><a href=/docs/v2021.03.17/guides/elasticsearch/autoscaler/storage/overview/>Overview</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/autoscaler/storage/combined/>Combined Cluster</a></li><li class=is-active><a href=/docs/v2021.03.17/guides/elasticsearch/autoscaler/storage/topology/>Topology Cluster</a></li></ul></div></div></ul></div></div><div class=item><input type=checkbox id=66e5a6bce0d6e1d6394b7d1e61f6280c-13>
<label for=66e5a6bce0d6e1d6394b7d1e61f6280c-13><a>Monitoring</a> <span><i class="fa fa-angle-right" aria-hidden=true></i></span></label><div class=item><ul><li><a href=/docs/v2021.03.17/guides/elasticsearch/monitoring/overview/>Overview</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/monitoring/using-prometheus-operator/>Prometheus Operator</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/monitoring/using-builtin-prometheus/>Builtin Prometheus</a></li></ul></div></div><div class=item><input type=checkbox id=66e5a6bce0d6e1d6394b7d1e61f6280c-14>
<label for=66e5a6bce0d6e1d6394b7d1e61f6280c-14><a>X-Pack</a> <span><i class="fa fa-angle-right" aria-hidden=true></i></span></label><div class=item><ul><li><a href=/docs/v2021.03.17/guides/elasticsearch/x-pack/configuration/>X-Pack Configuration</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/x-pack/use-tls/>Use TLS</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/x-pack/issue-certificate/>Issue Certificate</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/x-pack/disable-xpack/>Disable X-Pack</a></li></ul></div></div><div class=item><input type=checkbox id=66e5a6bce0d6e1d6394b7d1e61f6280c-15>
<label for=66e5a6bce0d6e1d6394b7d1e61f6280c-15><a>Search Guard</a> <span><i class="fa fa-angle-right" aria-hidden=true></i></span></label><div class=item><ul><li><a href=/docs/v2021.03.17/guides/elasticsearch/search-guard/overview/>Overview</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/search-guard/configuration/>Configuration</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/search-guard/use-tls/>Use TLS</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/search-guard/issue-certificate/>Issue Certificate</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/search-guard/disable-searchguard/>Disable Search Guard</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/search-guard/x-pack-monitoring/>Monitoring</a></li></ul></div></div><div class=item><input type=checkbox id=66e5a6bce0d6e1d6394b7d1e61f6280c-16>
<label for=66e5a6bce0d6e1d6394b7d1e61f6280c-16><a>Kibana</a> <span><i class="fa fa-angle-right" aria-hidden=true></i></span></label><div class=item><ul><li><a href=/docs/v2021.03.17/guides/elasticsearch/kibana/connect-kibana/>Use Kibana</a></li></ul></div></div><div class=item><input type=checkbox id=66e5a6bce0d6e1d6394b7d1e61f6280c-17>
<label for=66e5a6bce0d6e1d6394b7d1e61f6280c-17><a>CLI</a> <span><i class="fa fa-angle-right" aria-hidden=true></i></span></label><div class=item><ul><li><a href=/docs/v2021.03.17/guides/elasticsearch/cli/cli/>Quickstart</a></li></ul></div></div></div></div></div><div class="column is-7"><div class=full-info><blockquote><p>New to KubeDB? Please start <a href=/docs/v2021.03.17/README>here</a>.</p></blockquote><article class="message is-warning"><div class=message-body>This is an Enterprise-only feature. Please install <a href=/docs/v2021.03.17/setup/install/enterprise>KubeDB Enterprise Edition</a> to try this feature.</div></article><h1 id=storage-autoscaling-of-elasticsearch-topology-cluster>Storage Autoscaling of Elasticsearch Topology Cluster</h1><p>This guide will show you how to use <code>KubeDB</code> to autoscale the storage of an Elasticsearch topology cluster.</p><h2 id=before-you-begin>Before You Begin</h2><ul><li><p>At first, you need to have a Kubernetes cluster, and the <code>kubectl</code> command-line tool must be configured to communicate with your cluster.</p></li><li><p>Install <code>KubeDB</code> Community, Enterprise and Autoscaler operator in your cluster following the steps <a href=/docs/v2021.03.17/setup/README>here</a>.</p></li><li><p>Install Prometheus from <a href=https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack>here</a></p></li><li><p>You must have a <code>StorageClass</code> that supports volume expansion.</p></li><li><p>You should be familiar with the following <code>KubeDB</code> concepts:</p><ul><li><a href=/docs/v2021.03.17/guides/elasticsearch/concepts/elasticsearch/>Elasticsearch</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/concepts/autoscaler/>ElasticsearchAutoscaler</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/concepts/elasticsearch-ops-request/>ElasticsearchOpsRequest</a></li><li><a href=/docs/v2021.03.17/guides/elasticsearch/autoscaler/storage/overview/>Storage Autoscaling Overview</a></li></ul></li></ul><p>To keep everything isolated, we are going to use a separate namespace called <code>demo</code> throughout this tutorial.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ kubectl create ns demo
namespace/demo created
</code></pre></div><blockquote><p><strong>Note:</strong> YAML files used in this tutorial are stored in this <a href=/docs/v2021.03.17/guides/elasticsearch/autoscaler/storage/topology/yamls>directory</a> of <a href=https://github.com/kubedb/docs>kubedb/docs</a> repository.</p></blockquote><h2 id=storage-autoscaling-of-topology-cluster>Storage Autoscaling of Topology Cluster</h2><p>At first verify that your cluster has a storage class, that supports volume expansion. Let&rsquo;s check,</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ kubectl get storageclass
NAME                  PROVISIONER             RECLAIMPOLICY   VOLUMEBINDINGMODE      ALLOWVOLUMEEXPANSION   AGE
standard <span style=color:#f92672>(</span>default<span style=color:#f92672>)</span>    rancher.io/local-path   Delete          WaitForFirstConsumer   false                  9h
topolvm-provisioner   topolvm.cybozu.com      Delete          WaitForFirstConsumer   true                   9h
</code></pre></div><p>We can see from the output the <code>topolvm-provisioner</code> storage class has <code>ALLOWVOLUMEEXPANSION</code> field as true. So, this storage class supports volume expansion. We can use it. You can install topolvm from <a href=https://github.com/topolvm/topolvm>here</a></p><p>Now, we are going to deploy a <code>Elasticsearch</code> topology cluster using a supported version by the <code>KubeDB</code> operator. Then we are going to apply <code>ElasticsearchAutoscaler</code> to set up autoscaling.</p><h4 id=deploy-elasticsearch-topology>Deploy Elasticsearch Topology</h4><p>In this section, we are going to deploy a Elasticsearch topology cluster with version <code>searchguard-7.9.3</code>. Then, in the next section we will set up autoscaling for this database using <code>ElasticsearchAutoscaler</code> CRD. Below is the YAML of the <code>Elasticsearch</code> CR that we are going to create,</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>kubedb.com/v1alpha2</span>
<span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Elasticsearch</span>
<span style=color:#f92672>metadata</span>:
  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>es-topology</span>
  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>demo</span>
<span style=color:#f92672>spec</span>:
  <span style=color:#f92672>enableSSL</span>: <span style=color:#66d9ef>true</span> 
  <span style=color:#f92672>version</span>: <span style=color:#ae81ff>searchguard-7.9.3</span>
  <span style=color:#f92672>storageType</span>: <span style=color:#ae81ff>Durable</span>
  <span style=color:#f92672>topology</span>:
    <span style=color:#f92672>master</span>:
      <span style=color:#f92672>suffix</span>: <span style=color:#ae81ff>master</span>
      <span style=color:#f92672>replicas</span>: <span style=color:#ae81ff>1</span>
      <span style=color:#f92672>storage</span>:
        <span style=color:#f92672>storageClassName</span>: <span style=color:#e6db74>&#34;standard&#34;</span>
        <span style=color:#f92672>accessModes</span>:
        - <span style=color:#ae81ff>ReadWriteOnce</span>
        <span style=color:#f92672>resources</span>:
          <span style=color:#f92672>requests</span>:
            <span style=color:#f92672>storage</span>: <span style=color:#ae81ff>1Gi</span>
    <span style=color:#f92672>data</span>:
      <span style=color:#f92672>suffix</span>: <span style=color:#ae81ff>data</span>
      <span style=color:#f92672>replicas</span>: <span style=color:#ae81ff>2</span>
      <span style=color:#f92672>storage</span>:
        <span style=color:#f92672>storageClassName</span>: <span style=color:#e6db74>&#34;standard&#34;</span>
        <span style=color:#f92672>accessModes</span>:
        - <span style=color:#ae81ff>ReadWriteOnce</span>
        <span style=color:#f92672>resources</span>:
          <span style=color:#f92672>requests</span>:
            <span style=color:#f92672>storage</span>: <span style=color:#ae81ff>1Gi</span>
    <span style=color:#f92672>ingest</span>:
      <span style=color:#f92672>suffix</span>: <span style=color:#ae81ff>ingest</span>
      <span style=color:#f92672>replicas</span>: <span style=color:#ae81ff>1</span>
      <span style=color:#f92672>storage</span>:
        <span style=color:#f92672>storageClassName</span>: <span style=color:#e6db74>&#34;standard&#34;</span>
        <span style=color:#f92672>accessModes</span>:
        - <span style=color:#ae81ff>ReadWriteOnce</span>
        <span style=color:#f92672>resources</span>:
          <span style=color:#f92672>requests</span>:
            <span style=color:#f92672>storage</span>: <span style=color:#ae81ff>1Gi</span>
  <span style=color:#f92672>terminationPolicy</span>: <span style=color:#ae81ff>WipeOut</span>
</code></pre></div><p>Let&rsquo;s create the <code>Elasticsearch</code> CRO we have shown above,</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ kubectl create -f https://github.com/kubedb/docs/raw/v2021.03.17/docs/guides/elasticsearch/autoscaler/storage/topology/yamls/es-topology.yaml
elasticsearch.kubedb.com/es-topology created
</code></pre></div><p>Now, wait until <code>es-topology</code> has status <code>Ready</code>. i.e,</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ kubectl get elasticsearch -n demo -w
NAME          VERSION             STATUS         AGE
es-topology   searchguard-7.9.3   Provisioning   12s
es-topology   searchguard-7.9.3   Ready          1m50s
</code></pre></div><p>Let&rsquo;s check volume size from the data statefulset, and from the persistent volume,</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ kubectl get sts -n demo es-topology-data -o json | jq <span style=color:#e6db74>&#39;.spec.volumeClaimTemplates[].spec.resources&#39;</span>
<span style=color:#f92672>{</span>
  <span style=color:#e6db74>&#34;requests&#34;</span>: <span style=color:#f92672>{</span>
    <span style=color:#e6db74>&#34;storage&#34;</span>: <span style=color:#e6db74>&#34;1Gi&#34;</span>
  <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

$ kubectl get pv -n demo
NAME                                       CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS        CLAIM                            STORAGECLASS          REASON   AGE
pvc-1a22f743-2b03-487b-92db-e75ce14a3994   1Gi        RWO            Delete           Bound         demo/data-es-topology-ingest-0   topolvm-provisioner            2m8s
pvc-82c60733-22a3-4dbb-bac0-2fcd386650dd   1Gi        RWO            Delete           Bound         demo/data-es-topology-data-0     topolvm-provisioner            2m7s
pvc-a610cbb8-dece-4d2e-8870-b66a2f1fe458   1Gi        RWO            Delete           Bound         demo/data-es-topology-master-0   topolvm-provisioner            2m8s
pvc-edb7f4f7-f8ba-4af9-a507-b707462ddc3c   1Gi        RWO            Delete           Bound         demo/data-es-topology-data-1     topolvm-provisioner            119s
</code></pre></div><p>You can see that the data StatefulSet has 1GB storage, and the capacity of all the persistent volume is also 1GB.</p><p>We are now ready to apply the <code>ElasticsearchAutoscaler</code> CRO to set up storage autoscaling for the data nodes.</p><h3 id=storage-autoscaling>Storage Autoscaling</h3><p>Here, we are going to set up storage autoscaling using an ElasticsearchAutoscaler Object.</p><h4 id=create-elasticsearchautoscaler-object>Create ElasticsearchAutoscaler Object</h4><p>To set up vertical autoscaling for this topology cluster, we have to create a <code>ElasticsearchAutoscaler</code> CRO with our desired configuration. Below is the YAML of the <code>ElasticsearchAutoscaler</code> object that we are going to create,</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>autoscaling.kubedb.com/v1alpha1</span>
<span style=color:#f92672>kind</span>: <span style=color:#ae81ff>ElasticsearchAutoscaler</span>
<span style=color:#f92672>metadata</span>:
  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>es-topology-storage-as</span>
  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>demo</span>
<span style=color:#f92672>spec</span>:
  <span style=color:#f92672>databaseRef</span>:
    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>es-topology</span>
  <span style=color:#f92672>storage</span>:
    <span style=color:#f92672>topology</span>:
      <span style=color:#f92672>data</span>:
        <span style=color:#f92672>trigger</span>: <span style=color:#e6db74>&#34;On&#34;</span>
        <span style=color:#f92672>usageThreshold</span>: <span style=color:#ae81ff>60</span>
        <span style=color:#f92672>scalingThreshold</span>: <span style=color:#ae81ff>50</span>
</code></pre></div><p>Here,</p><ul><li><code>spec.databaseRef.name</code> specifies that we are performing vertical scaling operation on <code>es-topology</code> cluster.</li><li><code>spec.storage.topology.data.trigger</code> specifies that storage autoscaling is enabled for data nodes.</li><li><code>spec.storage.topology.data.usageThreshold</code> specifies storage usage threshold, if storage usage exceeds <code>60%</code> then storage autoscaling will be triggered.</li><li><code>spec.storage.topology.data.scalingThreshold</code> specifies the scaling threshold. Storage will be scaled to <code>50%</code> of the current amount.</li></ul><blockquote><p>Note: In this demo we are only setting up the storage autoscaling for the data nodes, that&rsquo;s why we only specified the data section of the autoscaler. You can enable autoscaling for master nodes and ingest nodes in the same YAML, by specifying the <code>topology.master</code> and <code>topology.ingest</code> respectivly.</p></blockquote><p>Let&rsquo;s create the <code>ElasticsearchAutoscaler</code> CR we have shown above,</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ kubectl apply -f https://github.com/kubedb/docs/raw/v2021.03.17/docs/guides/elasticsearch/autoscaler/storage/topology/yamls/es-topology-storage-as.yaml 
elasticsearchautoscaler.autoscaling.kubedb.com/es-topology-storage-as created
</code></pre></div><h4 id=storage-autoscaling-is-set-up-successfully>Storage Autoscaling is set up successfully</h4><p>Let&rsquo;s check that the <code>elasticsearchautoscaler</code> resource is created successfully,</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ kubectl get elasticsearchautoscaler -n demo
NAME                     AGE
es-topology-storage-as   4m16s

$ kubectl describe elasticsearchautoscaler -n demo es-topology-storage-as 
Name:         es-topology-storage-as
Namespace:    demo
Labels:       &lt;none&gt;
Annotations:  &lt;none&gt;
API Version:  autoscaling.kubedb.com/v1alpha1
Kind:         ElasticsearchAutoscaler
Metadata:
  Creation Timestamp:  2021-03-22T15:47:18Z
  Generation:          <span style=color:#ae81ff>1</span>
  Resource Version:  <span style=color:#ae81ff>19096</span>
  UID:               3ea0516f-e272-463e-be7f-903c86a8e084
Spec:
  Database Ref:
    Name:  es-topology
  Storage:
    Topology:
      Data:
        Scaling Threshold:  <span style=color:#ae81ff>50</span>
        Trigger:            On
        Usage Threshold:    <span style=color:#ae81ff>60</span>
Events:                     &lt;none&gt;

</code></pre></div><p>So, the <code>elasticsearchautoscaler</code> resource is created successfully.</p><p>Now, for this demo, we are going to manually fill up one of the persistent volume to exceed the <code>usageThreshold</code> using <code>dd</code> command to see if storage autoscaling is working or not.</p><p>Let&rsquo;s exec into the data nodes and fill the database volume using the following commands:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ kubectl exec -it -n demo es-topology-data-0 -- bash
<span style=color:#f92672>[</span>root@es-topology-data-0 elasticsearch<span style=color:#f92672>]</span><span style=color:#75715e># df -h /usr/share/elasticsearch/data</span>
Filesystem                                         Size  Used Avail Use% Mounted on
/dev/topolvm/fb6d30c8-8bf7-4c19-884e-937f150f4763 1014M   40M  975M   4% /usr/share/elasticsearch/data
<span style=color:#f92672>[</span>root@es-topology-data-0 elasticsearch<span style=color:#f92672>]</span><span style=color:#75715e># dd if=/dev/zero of=/usr/share/elasticsearch/data/file.img bs=650M count=1</span>
1+0 records in
1+0 records out
<span style=color:#ae81ff>681574400</span> bytes <span style=color:#f92672>(</span><span style=color:#ae81ff>682</span> MB<span style=color:#f92672>)</span> copied, 2.25556 s, <span style=color:#ae81ff>302</span> MB/s
<span style=color:#f92672>[</span>root@es-topology-data-0 elasticsearch<span style=color:#f92672>]</span><span style=color:#75715e># df -h /usr/share/elasticsearch/data</span>
Filesystem                                         Size  Used Avail Use% Mounted on
/dev/topolvm/fb6d30c8-8bf7-4c19-884e-937f150f4763 1014M  690M  325M  69% /usr/share/elasticsearch/data

</code></pre></div><p>So, from the above output we can see that the storage usage is 69%, which exceeded the <code>usageThreshold</code> 60%.</p><p>Let&rsquo;s watch the <code>elasticsearchopsrequest</code> in the demo namespace to see if any <code>elasticsearchopsrequest</code> object is created. After some time you&rsquo;ll see that an <code>elasticsearchopsrequest</code> of type <code>VolumeExpansion</code> will be created based on the <code>scalingThreshold</code>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ kubectl get esops -n demo -w
NAME                       TYPE              STATUS   AGE
esops-es-topology-79zpaf   VolumeExpansion            0s
esops-es-topology-79zpaf   VolumeExpansion   Progressing   0s
</code></pre></div><p>Let&rsquo;s wait for the opsRequest to become successful.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ kubectl get esops -n demo
NAME                       TYPE              STATUS   AGE
esops-es-topology-79zpaf   VolumeExpansion   Successful    110s
</code></pre></div><p>We can see from the above output that the <code>ElasticsearchOpsRequest</code> has succeeded. If we describe the <code>ElasticsearchOpsRequest</code> we will get an overview of the steps that were followed to expand the volume of the database.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ kubectl describe elasticsearchopsrequest -n demo esops-es-topology-79zpaf 
Name:         esops-es-topology-79zpaf
Namespace:    demo
Labels:       app.kubernetes.io/component<span style=color:#f92672>=</span>database
              app.kubernetes.io/instance<span style=color:#f92672>=</span>es-topology
              app.kubernetes.io/managed-by<span style=color:#f92672>=</span>kubedb.com
              app.kubernetes.io/name<span style=color:#f92672>=</span>elasticsearches.kubedb.com
Annotations:  &lt;none&gt;
API Version:  ops.kubedb.com/v1alpha1
Kind:         ElasticsearchOpsRequest
Metadata:
  Creation Timestamp:  2021-03-22T16:03:54Z
  Generation:          <span style=color:#ae81ff>1</span>
  Owner References:
    API Version:           autoscaling.kubedb.com/v1alpha1
    Block Owner Deletion:  true
    Controller:            true
    Kind:                  ElasticsearchAutoscaler
    Name:                  es-topology-storage-as
    UID:                   aae135af-b203-47db-baeb-f51ffeb66e57
  Resource Version:        <span style=color:#ae81ff>23727</span>
  UID:                     378b28e8-9a7f-49c2-9e4d-49ee6ecad4d0
Spec:
  Database Ref:
    Name:  es-topology
  Type:    VolumeExpansion
  Volume Expansion:
    Topology:
      Data:  <span style=color:#ae81ff>1594884096</span>
Status:
  Conditions:
    Last Transition Time:  2021-03-22T16:03:54Z
    Message:               Elasticsearch ops request is expanding volume of the Elasticsearch nodes.
    Observed Generation:   <span style=color:#ae81ff>1</span>
    Reason:                VolumeExpansion
    Status:                True
    Type:                  VolumeExpansion
    Last Transition Time:  2021-03-22T16:05:24Z
    Message:               successfully expanded data nodes
    Observed Generation:   <span style=color:#ae81ff>1</span>
    Reason:                UpdateDataNodePVCs
    Status:                True
    Type:                  UpdateDataNodePVCs
    Last Transition Time:  2021-03-22T16:05:39Z
    Message:               successfully deleted the statefulSets with orphan propagation policy
    Observed Generation:   <span style=color:#ae81ff>1</span>
    Reason:                OrphanStatefulSetPods
    Status:                True
    Type:                  OrphanStatefulSetPods
    Last Transition Time:  2021-03-22T16:05:44Z
    Message:               StatefulSet is recreated
    Observed Generation:   <span style=color:#ae81ff>1</span>
    Reason:                ReadyStatefulSets
    Status:                True
    Type:                  ReadyStatefulSets
    Last Transition Time:  2021-03-22T16:05:44Z
    Message:               Successfully completed the modification process.
    Observed Generation:   <span style=color:#ae81ff>1</span>
    Reason:                Successful
    Status:                True
    Type:                  Successful
  Observed Generation:     <span style=color:#ae81ff>1</span>
  Phase:                   Successful
Events:
  Type    Reason                 Age    From                        Message
  ----    ------                 ----   ----                        -------
  Normal  PauseDatabase          3m18s  KubeDB Enterprise Operator  Pausing Elasticsearch demo/es-topology
  Normal  UpdateDataNodePVCs     108s   KubeDB Enterprise Operator  successfully expanded data nodes
  Normal  OrphanStatefulSetPods  93s    KubeDB Enterprise Operator  successfully deleted the statefulSets with orphan propagation policy
  Normal  ResumeDatabase         93s    KubeDB Enterprise Operator  Resuming Elasticsearch demo/es-topology
  Normal  ResumeDatabase         93s    KubeDB Enterprise Operator  Resuming Elasticsearch demo/es-topology
  Normal  ReadyStatefulSets      88s    KubeDB Enterprise Operator  StatefulSet is recreated
  Normal  ResumeDatabase         88s    KubeDB Enterprise Operator  Resuming Elasticsearch demo/es-topology
  Normal  Successful             88s    KubeDB Enterprise Operator  Successfully Updated Database
</code></pre></div><p>Now, we are going to verify from the <code>Statefulset</code>, and the <code>Persistent Volume</code> whether the volume of the data nodes of the cluster has expanded to meet the desired state, Let&rsquo;s check,</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ kubectl get sts -n demo es-topology-data -o json | jq <span style=color:#e6db74>&#39;.spec.volumeClaimTemplates[].spec.resources&#39;</span>
<span style=color:#f92672>{</span>
  <span style=color:#e6db74>&#34;requests&#34;</span>: <span style=color:#f92672>{</span>
    <span style=color:#e6db74>&#34;storage&#34;</span>: <span style=color:#e6db74>&#34;1594884096&#34;</span>
  <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

$ kubectl get pvc -n demo
NAME                        STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS          AGE
data-es-topology-data-0     Bound    pvc-82c60733-22a3-4dbb-bac0-2fcd386650dd   2Gi        RWO            topolvm-provisioner   11m
data-es-topology-data-1     Bound    pvc-edb7f4f7-f8ba-4af9-a507-b707462ddc3c   2Gi        RWO            topolvm-provisioner   11m
data-es-topology-ingest-0   Bound    pvc-1a22f743-2b03-487b-92db-e75ce14a3994   1Gi        RWO            topolvm-provisioner   11m
data-es-topology-master-0   Bound    pvc-a610cbb8-dece-4d2e-8870-b66a2f1fe458   1Gi        RWO            topolvm-provisioner   11m

$ kubectl get pv -n demo
NAME                                       CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS        CLAIM                            STORAGECLASS          REASON   AGE
pvc-1a22f743-2b03-487b-92db-e75ce14a3994   1Gi        RWO            Delete           Bound         demo/data-es-topology-ingest-0   topolvm-provisioner            10m
pvc-82c60733-22a3-4dbb-bac0-2fcd386650dd   2Gi        RWO            Delete           Bound         demo/data-es-topology-data-0     topolvm-provisioner            10m
pvc-a610cbb8-dece-4d2e-8870-b66a2f1fe458   1Gi        RWO            Delete           Bound         demo/data-es-topology-master-0   topolvm-provisioner            10m
pvc-edb7f4f7-f8ba-4af9-a507-b707462ddc3c   2Gi        RWO            Delete           Bound         demo/data-es-topology-data-1     topolvm-provisioner            10m
</code></pre></div><p>The above output verifies that we have successfully autoscaled the volume of the data nodes of this Elasticsearch topology cluster.</p><h2 id=cleaning-up>Cleaning Up</h2><p>To clean up the Kubernetes resources created by this tutorial, run:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ kubectl delete elasticsearch -n demo es-topology
$ kubectl delete elasticsearchautoscaler -n demo es-topology-storage-as
</code></pre></div></div></div><div class="column is-2"><div class=right-sidebar-area><div class=search-area><form action=#><input id=acSearch type=text placeholder=Search...>
<button class=search-button>
<i class="fa fa-search" aria-hidden=true></i></button></form></div><div class=tbl-of-contents><h4>What's on this Page</h4><nav id=TableOfContents><ul><li><a href=#before-you-begin>Before You Begin</a></li><li><a href=#storage-autoscaling-of-topology-cluster>Storage Autoscaling of Topology Cluster</a><ul><li></li><li><a href=#storage-autoscaling>Storage Autoscaling</a></li></ul></li><li><a href=#cleaning-up>Cleaning Up</a></li></ul></nav></div></div></div></div></div><script>var kdDropdown=document.querySelector(".dropdown"),kdDropdownBtn=document.querySelector(".dropdown-trigger");kdDropdownBtn.addEventListener("click",function(){kdDropdown.classList.toggle("is-active")})</script></div><div class=overlay-bg></div><div class=sidebar-search-area><div class=search-area-top><h3>Search</h3><div class=searchbar-area><input type=search name=search id=searchbox placeholder=Search...>
<button onclick=queryPage(1)><i class="fa fa-search" aria-hidden=true></i></button></div><span id=searchbar-script-container style=display:none></span><div class="search-meta-information level"><div class=level-left></div></div></div><div class=search-result-wrapper></div><div class=pagination-area><div class=pagination-list></div></div></div><div class=improve-section-area><div class="container section"><div class=improve-bg-color><div class=columns><div class="column is-6"><a href=https://github.com/kubedb/docs/edit/master/docs/guides/elasticsearch/autoscaler/storage/topology/index.md/>Improve This Page</a></div></div></div></div></div><script type=text/javascript>var pageSize=5,acSearch=document.querySelector("#acSearch"),bodyOverlay=document.querySelector(".overlay-bg"),sidebarSearch=document.querySelector(".sidebar-search-area");acSearch.addEventListener("click",function(){bodyOverlay.style.display="block",sidebarSearch.style.right="0",document.getElementById("searchbox").focus(),bodyOverlay.addEventListener("click",function(){bodyOverlay.style.display="none",sidebarSearch.style.right="-80%"})});function encodeQueryData(a){var b=[],c;for(c in a)b.push(encodeURIComponent(c)+'='+encodeURIComponent(a[c]));return b.join('&')}document.querySelector(".searchbar-area input[type=search]").addEventListener("keyup",function(a){a.preventDefault(),a.keyCode===13&&queryPage(1)});function queryPage(c){var i=document.getElementById("searchbox").value,j="015199383701854252104:8mvwy0fek2e",d="AIzaSyBrcwLTnL09geNrFMUx1kpL--dT1379aag",f="small",g="renderResult",h="https://www.googleapis.com/customsearch/v1?"+encodeQueryData({q:i,cx:j,key:d,imgSize:f,callback:g,start:(c-1)*pageSize+1,num:pageSize}),a=document.createElement("script"),b;a.src=h,e=document.getElementById("searchbar-script-container"),b=e.lastElementChild,b&&e.removeChild(b),e.appendChild(a)}function renderSearchResultEntry(a){var b='<div class="single-search-result"><h3><a href="'+a.link+'">'+a.title+'</a></h3>'+'<a href="'+a.link+'">'+a.htmlFormattedUrl+'</a>'+'<div class="result-description-wrapper">';return a.pagemap&&a.pagemap.cse_thumbnail&&(b+='<div class="result-thumb"><img src="'+a.pagemap.cse_thumbnail[0].src+'" alt="" />'+'</div>'),b+='<div class="result-description"><p>'+a.snippet+'</p>'+'</div>'+'</div>'+'</div>',b}function renderResult(a){var e,d,c,b;if(document.querySelector(".search-meta-information .level-left").innerHTML='<div class="level-left"><p>About <span class="search-count">'+a.searchInformation.formattedTotalResults+'</span> results (<span class="time-count">'+a.searchInformation.formattedSearchTime+' </span>seconds)'+'</p>'+'</div>',!a.items)return;e=document.querySelector(".search-result-wrapper"),e.innerHTML="";for(d=0;d<a.items.length;d++)e.innerHTML+=renderSearchResultEntry(a.items[d]);c='<ul>',a.queries.previousPage&&(b=Math.floor(a.queries.previousPage[0].startIndex/pageSize)+1,c+='<li><a href="#" onclick="queryPage('+b+')">Previous</a></li>'),a.queries.request&&(b=Math.floor(a.queries.request[0].startIndex/pageSize)+1,c+='<li><a href="#" onclick="queryPage('+b+')" class="is-active">'+b+'</a></li>'),a.queries.nextPage&&(b=Math.floor(a.queries.nextPage[0].startIndex/pageSize)+1,c+='<li><a href="#" onclick="queryPage('+b+')">Next</a></li>'),c+='</ul>',document.querySelector(".pagination-area .pagination-list").innerHTML=c}</script><section></section><section></section><section></section><button class=go-to-top id=goTop>
<i class="fa fa-angle-up" aria-hidden=true></i></button><footer class=footer-area><div class=footer-top><div class="container section"><div class="columns is-mobile is-multiline"><div class="column is-full-mobile is-one-third-desktop is-one-third-widescreen is-one-third-tablet" data-aos=fade-up><div class=single-footer-widget><div class=footer-logo><a href=https://appscode.com><img src=/assets/images/products/appscode/appscode.png alt=AppsCode class=img></a></div><div class=subscription-form><form method=post action=https://listmonk.appscode.com/subscription/form id=mc-embedded-subscribe-form name=mc-embedded-subscribe-form class=navbar-form target=_blank novalidate role=email role=email><label for=email>Subscribe to Our Newsletter</label><p class=spam-message>No spam, we promise. Your mail address is secure</p><div class="field has-addons"><div class=control><input type=hidden id=afbbc name=l value=afbbc974-e163-4467-be49-040e399520f3>
<input class=input name=email id=mce-EMAIL type=email placeholder="Your work email address" required>
<button id=mc-embedded-subscribe type=submit name=subscribe class=button>
<i class="fa fa-paper-plane-o" aria-hidden=true></i></button></div></div></form></div><div class=contact-information><h4>Have any Inquiry?</h4><ul class=all-contact-info><li><a href=callto:+1%28650%29241-8486><span><i class="fa fa-phone" aria-hidden=true></i></span>+1(650)241-8486</a></li><li><a href=mailto:support@appscode.com><span><i class="fa fa-envelope-o" aria-hidden=true></i></span>support@appscode.com</a></li></ul></div></div></div><div class="column is-half-mobile" data-aos=fade-up data-aos-duration=500><div class=single-footer-widget><div class=footer-menu><h4>Products</h4><ul class=footer-link><li><a href=https://kubedb.com>KubeDB</a></li><li><a href=https://stash.run>Stash</a></li><li><a href=https://kubevault.com>KubeVault</a></li><li><a href=https://kubeform.cloud>Kubeform</a></li></ul></div></div></div><div class="column is-half-mobile" data-aos=fade-up data-aos-duration=600><div class=single-footer-widget><div class=footer-menu><h4>Services</h4><ul class=footer-link><li><a href=https://appscode.com/pricing/>Pricing</a></li><li><a href=https://appscode.com/consulting/>Consulting</a></li><li><a href=https://appscode.com/training/>Training</a></li><li><a href=https://appscode.com/support/>Support</a></li></ul></div></div></div><div class="column is-half-mobile" data-aos=fade-up data-aos-duration=700><div class=single-footer-widget><div class=footer-menu><h4>Company</h4><ul class=footer-link><li><a href=https://appscode.com/about/>About Us</a></li><li><a href=https://blog.byte.builders>Blog</a></li><li><a href=https://appscode.com/contact/>Contact Us</a></li></ul></div></div></div><div class="column is-half-mobile" data-aos=fade-up data-aos-duration=800><div class=single-footer-widget><div class=footer-menu><h4>Legal</h4><ul class=footer-link><li><a href=https://appscode.com/legal/tos/>Terms of Sevice</a></li><li><a href=https://appscode.com/legal/privacy-policy/>Privacy Policy</a></li><li><a href=https://appscode.com/legal/security/>Security</a></li><li><a href=https://appscode.com/legal/sla/>Service Level Agreement</a></li></ul></div></div></div></div></div></div><div class=footer-bottom><div class="container section"><div class=columns><div class="column is-4"><p> 2021 AppsCode Inc. All rights reserved.</p></div><div class="column is-4 is-mobile has-text-centered"><div class=footer-inline-link><a href=https://appscode.com/legal/privacy-policy/>Privacy Policy</a>
<a href=https://appscode.com/legal/tos/>Terms of Service</a></div></div><div class="column is-4 is-mobile has-text-right"><div class=socail-link-inline><ul><li><a href=https://twitter.com/AppsCodeHQ><i class="fa fa-twitter" aria-hidden=true></i></a></li><li><a href=https://www.facebook.com/appscode><i class="fa fa-facebook" aria-hidden=true></i></a></li><li><a href=https://www.youtube.com/c/AppsCodeInc><i class="fa fa-youtube" aria-hidden=true></i></a></li></ul></div></div></div></div></div></footer><script src=/assets/js/bulma-carousel.min.js></script><script src=https://unpkg.com/aos@2.3.1/dist/aos.js></script><script src=https://unpkg.com/downloadjs@1.4.7/download.min.js></script><script src=https://unpkg.com/clipboard@2/dist/clipboard.min.js></script><script src=/assets/js/main.js></script><script type=text/javascript id=hs-script-loader async defer src=//js.hs-scripts.com/9255943.js></script><script type=text/javascript>var Tawk_API=Tawk_API||{},Tawk_LoadStart=new Date;(function(){var a=document.createElement("script"),b=document.getElementsByTagName("script")[0];a.async=!0,a.src='https://embed.tawk.to/5821e34b18d9f16af02864b7/default',a.charset='UTF-8',a.setAttribute('crossorigin','*'),b.parentNode.insertBefore(a,b)})()</script></body></html>